<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.72.0" />
    <meta name="description" content="Preparation to deploy OIG on Kubernetes">


    <link rel="icon" href="/fmw-kubernetes/20.4.1/images/favicon.png" type="image/png">

    <title>Prepare your environment :: Oracle Fusion Middleware on Kubernetes</title>

    
    <link href="/fmw-kubernetes/20.4.1/css/nucleus.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/fontawesome-all.min.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/hybrid.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/featherlight.min.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/perfect-scrollbar.min.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/auto-complete.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/atom-one-dark-reasonable.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/theme.css?1612502690" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.1/css/hugo-theme.css?1612502690" rel="stylesheet">
    

    <script src="/fmw-kubernetes/20.4.1/js/jquery-3.3.1.min.js?1612502690"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/fmw-kubernetes/20.4.1/oig/prepare-your-environment/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/fmw-kubernetes/20.4.1/">
  <img src="/fmw-kubernetes/20.4.1//images/fmw_12c_12_2_1_4_0-logo.png" height="100"><br/>
  <b>Oracle Fusion Middleware on Kubernetes </b>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/fmw-kubernetes/20.4.1/js/lunr.min.js?1612502690"></script>
<script type="text/javascript" src="/fmw-kubernetes/20.4.1/js/auto-complete.js?1612502690"></script>
<script type="text/javascript">
    
        var baseurl = "\/fmw-kubernetes\/20.4.1\/";
    
</script>
<script type="text/javascript" src="/fmw-kubernetes/20.4.1/js/search.js?1612502690"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
        <li><a  class="" href="/fmw-kubernetes/">Home</a></li>
        
          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/" title="Oracle Access Management" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/">
          Oracle Access Management
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/prerequisites/" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/prerequisites/">
          <b>1. </b>Prerequisites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/prepare-your-environment/">
          <b>2. </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/create-oam-domains/" title="Create OAM domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/create-oam-domains/">
          <b>3. </b>Create OAM domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/configure-ingress/" title="Configure an Ingress for an OAM domain" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/configure-ingress/">
          <b>4. </b>Configure an Ingress for an OAM domain
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/configure-ingress/ingress-nginx-setup-for-oam-domain-setup-on-k8s/" title="a. Using an Ingress with NGINX" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/configure-ingress/ingress-nginx-setup-for-oam-domain-setup-on-k8s/">
        a. Using an Ingress with NGINX
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/configure-ingress/ingress-voyager-setup-for-oam-domain-setup-on-k8s/" title="b. Using an Ingress with Voyager" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/configure-ingress/ingress-voyager-setup-for-oam-domain-setup-on-k8s/">
        b. Using an Ingress with Voyager
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/validate-domain-urls/" title="Validate Domain URLs" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/validate-domain-urls/">
          <b>5. </b>Validate Domain URLs
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/post-install-config/" title="Post Install Configuration" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/post-install-config/">
          <b>6. </b>Post Install Configuration
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/validate-sso-using-webgate/" title="Validate a Basic SSO Flow using WebGate Registration " class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/validate-sso-using-webgate/">
          <b>7. </b>Validate a Basic SSO Flow using WebGate Registration 
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/" title="Manage OAM Domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/">
          <b>8. </b>Manage OAM Domains
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/domain-lifecycle/" title="Domain Life Cycle" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/domain-lifecycle/">
        <b>1. </b>Domain Life Cycle
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/wlst-admin-operations/" title="WLST Administration Operations" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/wlst-admin-operations/">
        <b>2. </b>WLST Administration Operations
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/logging-and-visualization/" title="Logging and Visualization" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/logging-and-visualization/">
        <b>3. </b>Logging and Visualization
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/monitoring-oam-domains/" title="Monitoring an OAM domain" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/monitoring-oam-domains/">
        <b>4. </b>Monitoring an OAM domain
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/delete-domain-home/" title="Delete the OAM domain home" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/manage-oam-domains/delete-domain-home/">
        <b>5. </b>Delete the OAM domain home
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/" title="Patch and Upgrade" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/">
          <b>9. </b>Patch and Upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/patch_an_image/" title="a. Patch an image" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/patch_an_image/">
        a. Patch an image
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/upgrade_an_operator_release/" title="b. Upgrade an operator release" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/upgrade_an_operator_release/">
        b. Upgrade an operator release
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/upgrade_a_kubernetes_cluster/" title="c. Upgrade a Kubernetes cluster" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oam/patch-and-upgrade/upgrade_a_kubernetes_cluster/">
        c. Upgrade a Kubernetes cluster
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/security-hardening/" title="Security Hardening" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/security-hardening/">
          <b>10. </b>Security Hardening
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oam/troubleshooting/" title="Troubleshooting" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oam/troubleshooting/">
          <b>11. </b>Troubleshooting
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/" title="Oracle Identity Governance" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/">
          Oracle Identity Governance
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/prerequisites/" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/prerequisites/">
          <b>1. </b>Prerequisites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        parent
        active
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/prepare-your-environment/">
          <b>2. </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/create-oig-domains/" title="Create OIG domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/create-oig-domains/">
          <b>3. </b>Create OIG domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-ingress/" title="Configure an Ingress for an OIG domain" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/configure-ingress/">
          <b>4. </b>Configure an Ingress for an OIG domain
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-nginx-setup-for-oig-domain-setup-on-k8s/" title="a. Using an Ingress with NGINX (non-SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-nginx-setup-for-oig-domain-setup-on-k8s/">
        a. Using an Ingress with NGINX (non-SSL)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-nginx-setup-for-oig-domain-setup-on-k8s-ssl/" title="b. Using an Ingress with NGINX (SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-nginx-setup-for-oig-domain-setup-on-k8s-ssl/">
        b. Using an Ingress with NGINX (SSL)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-voyager-setup-for-oig-domain-setup-on-k8s/" title="c. Using an Ingress with Voyager (non-SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-voyager-setup-for-oig-domain-setup-on-k8s/">
        c. Using an Ingress with Voyager (non-SSL)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-voyager-setup-for-oig-domain-setup-on-k8s-ssl/" title="d. Using an Ingress with Voyager (SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-ingress/ingress-voyager-setup-for-oig-domain-setup-on-k8s-ssl/">
        d. Using an Ingress with Voyager (SSL)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/validate-domain-urls/" title="Validate Domain URLs" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/validate-domain-urls/">
          <b>5. </b>Validate Domain URLs
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/post-install-config/" title="Post Install Configuration" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/post-install-config/">
          <b>6. </b>Post Install Configuration
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/post-install-config/set_oimfronendurl_using_mbeans/" title="a. Set OIMfrontendURL" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/post-install-config/set_oimfronendurl_using_mbeans/">
        a. Set OIMfrontendURL
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/post-install-config/install_and_configure_connectors/" title="b. Install and Configure Connectors" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/post-install-config/install_and_configure_connectors/">
        b. Install and Configure Connectors
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-design-console/" title="Configure Design Console" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/configure-design-console/">
          <b>7. </b>Configure Design Console
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-nginx-non-ssl/" title="a. Using Design Console with NGINX(non-SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-nginx-non-ssl/">
        a. Using Design Console with NGINX(non-SSL)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-nginx-ssl/" title="a. Using Design Console with NGINX(SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-nginx-ssl/">
        a. Using Design Console with NGINX(SSL)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-voyager-non-ssl/" title="a. Using Design Console with Voyager(non-SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-voyager-non-ssl/">
        a. Using Design Console with Voyager(non-SSL)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-voyager-ssl/" title="a. Using Design Console with Voyager(SSL)" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/configure-design-console/using-the-design-console-with-voyager-ssl/">
        a. Using Design Console with Voyager(SSL)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/" title="Manage OIG Domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/">
          <b>7. </b>Manage OIG Domains
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/domain-lifecycle/" title="Domain Life Cycle" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/domain-lifecycle/">
        <b>1. </b>Domain Life Cycle
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/wlst-admin-operations/" title="WLST Administration Operations" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/wlst-admin-operations/">
        <b>2. </b>WLST Administration Operations
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/running-oig-utilities/" title="Runnning OIG Utilities" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/running-oig-utilities/">
        <b>3. </b>Runnning OIG Utilities
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/logging-and-visualization/" title="Logging and Visualization" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/logging-and-visualization/">
        <b>4. </b>Logging and Visualization
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/monitoring-oim-domains/" title="Monitoring an OIG domain" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/monitoring-oim-domains/">
        <b>5. </b>Monitoring an OIG domain
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/delete-domain-home/" title="Delete the OIG domain home" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/manage-oig-domains/delete-domain-home/">
        <b>6. </b>Delete the OIG domain home
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/" title="Patch and Upgrade" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/">
          <b>8. </b>Patch and Upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/patch_an_image/" title="a. Patch an image" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/patch_an_image/">
        a. Patch an image
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/upgrade_an_operator_release/" title="b. Upgrade an operator release" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/upgrade_an_operator_release/">
        b. Upgrade an operator release
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/upgrade_a_kubernetes_cluster/" title="c. Upgrade a Kubernetes cluster" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oig/patch-and-upgrade/upgrade_a_kubernetes_cluster/">
        c. Upgrade a Kubernetes cluster
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/troubleshooting/" title="Troubleshooting" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/troubleshooting/">
          <b>9. </b>Troubleshooting
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oig/security-hardening/" title="Security Hardening" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oig/security-hardening/">
          <b>10. </b>Security Hardening
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/" title="Oracle Unified Directory" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/">
          Oracle Unified Directory
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/prerequisites/" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/prerequisites/">
          <b>1. </b>Prerequisites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/prepare-your-environment/" title="Prepare Your Environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/prepare-your-environment/">
          <b>2. </b>Prepare Your Environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/create-oud-instances/" title="Create Oracle Unified Directory Instances Using Samples" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/create-oud-instances/">
          <b>3. </b>Create Oracle Unified Directory Instances Using Samples
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/create-oud-instances-helm/" title="Create Oracle Unified Directory Instances Using Helm" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/create-oud-instances-helm/">
          <b>4. </b>Create Oracle Unified Directory Instances Using Helm
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/create-oud-instances-helm/oud-ds-rs/" title="Helm Chart: oud-ds-rs: For deployment of replicated Oracle Unified Directory (DS&#43;RS) instances" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/create-oud-instances-helm/oud-ds-rs/">
          Helm Chart: oud-ds-rs: For deployment of replicated Oracle Unified Directory (DS&#43;RS) instances
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/manage-oud-containers/" title="Manage Oracle Unified Directory Containers" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/manage-oud-containers/">
          <b>5. </b>Manage Oracle Unified Directory Containers
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oud/manage-oud-containers/logging-and-visualization/" title="a) Logging and Visualization for Helm Chart oud-ds-rs Deployment" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oud/manage-oud-containers/logging-and-visualization/">
        a) Logging and Visualization for Helm Chart oud-ds-rs Deployment
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oud/manage-oud-containers/monitoring-oud-instance/" title="b) Monitoring an Oracle Unified Directory Instance" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oud/manage-oud-containers/monitoring-oud-instance/">
        b) Monitoring an Oracle Unified Directory Instance
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/patch-and-upgrade/" title="Upgrade" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/patch-and-upgrade/">
          <b>6. </b>Upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oud/patch-and-upgrade/upgrade_a_kubernetes_cluster/" title="a) Upgrade a Kubernetes cluster" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oud/patch-and-upgrade/upgrade_a_kubernetes_cluster/">
        a) Upgrade a Kubernetes cluster
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/security-hardening/" title="Security Hardening" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/security-hardening/">
          <b>7. </b>Security Hardening
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oud/troubleshooting/" title="Troubleshooting" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oud/troubleshooting/">
          <b>8. </b>Troubleshooting
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/" title="Oracle Unified Directory Services Manager" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/">
          Oracle Unified Directory Services Manager
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/prerequisites/" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/prerequisites/">
          <b>1. </b>Prerequisites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/prepare-your-environment/" title="Prepare Your Environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/prepare-your-environment/">
          <b>2. </b>Prepare Your Environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/create-oudsm-instances/" title="Create Oracle Unified Directory Services Manager Instances Using Samples" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/create-oudsm-instances/">
          <b>3. </b>Create Oracle Unified Directory Services Manager Instances Using Samples
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/create-oudsm-instances-helm/" title="Create Oracle Unified Directory Services Manager Instances Using Helm" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/create-oudsm-instances-helm/">
          <b>4. </b>Create Oracle Unified Directory Services Manager Instances Using Helm
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/create-oudsm-instances-helm/oudsm/" title="Helm Chart: oudsm: For deployment of Oracle Unified Directory Services Manager instances on Kubernetes" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/create-oudsm-instances-helm/oudsm/">
          Helm Chart: oudsm: For deployment of Oracle Unified Directory Services Manager instances on Kubernetes
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/manage-oudsm-containers/" title="Manage Oracle Unified Directory Services Manager Containers" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/manage-oudsm-containers/">
          <b>5. </b>Manage Oracle Unified Directory Services Manager Containers
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/manage-oudsm-containers/logging-and-visualization/" title="a) Logging and Visualization for Helm Chart oudsm Deployment" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oudsm/manage-oudsm-containers/logging-and-visualization/">
        a) Logging and Visualization for Helm Chart oudsm Deployment
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/manage-oudsm-containers/monitoring-oudsm-instance/" title="b) Monitoring an Oracle Unified Directory Services Manager Instance" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oudsm/manage-oudsm-containers/monitoring-oudsm-instance/">
        b) Monitoring an Oracle Unified Directory Services Manager Instance
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/patch-and-upgrade/" title="Upgrade" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/patch-and-upgrade/">
          <b>6. </b>Upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/patch-and-upgrade/upgrade_a_kubernetes_cluster/" title="b) Upgrade a Kubernetes cluster" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.1/oudsm/patch-and-upgrade/upgrade_a_kubernetes_cluster/">
        b) Upgrade a Kubernetes cluster
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/security-hardening/" title="Security Hardening" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/security-hardening/">
          <b>7. </b>Security Hardening
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.1/oudsm/troubleshooting/" title="Troubleshooting" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.1/oudsm/troubleshooting/">
          <b>8. </b>Troubleshooting
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp;</p>
<p><a href="https://github.com/oracle/fmw-kubernetes"><i class="fab fa-github"></i> GitHub repo</a></p>


    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/fmw-kubernetes/20.4.1/'>Oracle Fusion Middleware on Kubernetes</a> > <a href='/fmw-kubernetes/20.4.1/oig/'>Oracle Identity Governance</a> > Prepare your environment
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#set-up-your-kubernetes-cluster">Set up your Kubernetes cluster</a></li>
        <li><a href="#install-helm">Install Helm</a></li>
        <li><a href="#check-the-kubernetes-cluster-is-ready">Check the Kubernetes cluster is ready</a></li>
        <li><a href="#install-the-oig-docker-image">Install the OIG Docker Image</a></li>
        <li><a href="#install-the-oracle-weblogic-server-kubernetes-operator-docker-image">Install the Oracle WebLogic Server Kubernetes Operator Docker Image</a></li>
        <li><a href="#setup-the-code-repository-to-deploy-oracle-identity-governance-domains">Setup the Code Repository to Deploy Oracle Identity Governance Domains</a></li>
        <li><a href="#install-the-oracle-weblogic-kubernetes-operator">Install the Oracle WebLogic Kubernetes Operator</a></li>
        <li><a href="#rcu-schema-creation">RCU schema creation</a></li>
        <li><a href="#preparing-the-environment-for-domain-creation">Preparing the environment for domain creation</a></li>
        <li><a href="#create-a-kubernetes-persistent-volume-and-persistent-volume-claim">Create a Kubernetes persistent volume and persistent volume claim</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Prepare your environment
            </h1>
          

        




	<ol>
<li><a href="#set-up-your-kubernetes-cluster">Set up your Kubernetes cluster</a></li>
<li><a href="#install-helm">Install Helm</a></li>
<li><a href="#check-the-kubernetes-cluster-is-ready">Check the Kubernetes cluster is ready</a></li>
<li><a href="#install-the-oig-docker-image">Install the OIG Docker image</a></li>
<li><a href="#install-the-oracle-weblogic-server-kubernetes-operator-docker-image">Install the Oracle WebLogic Server Kubernetes Operator Docker Image</a></li>
<li><a href="#setup-the-code-repository-to-deploy-oracle-identity-governance-domains">Setup the Code Repository to Deploy Oracle Identity Governance Domains</a></li>
<li><a href="#install-the-oracle-weblogic-kubernetes-operator">Install the Oracle WebLogic Kubernetes Operator</a></li>
<li><a href="#rcu-schema-creation">RCU schema creation</a></li>
<li><a href="#preparing-the-environment-for-domain-creation">Preparing the environment for domain creation</a>
<ol>
<li><a href="#configure-the-operator-for-the-domain-namespace">Configure the operator for the domain namespace</a></li>
<li><a href="#creating-kubernetes-secrets-for-the-domain-and-rcu">Creating Kubernetes secrets for the domain and RCU</a></li>
<li><a href="#create-a-kubernetes-persistent-volume-and-persistent-volume-claim">Create a Kubernetes persistent volume and persistent volume claim</a></li>
</ol>
</li>
</ol>
<h3 id="set-up-your-kubernetes-cluster">Set up your Kubernetes cluster</h3>
<p>If you need help setting up a Kubernetes environment, check our <a href="https://oracle.github.io/weblogic-kubernetes-operator/userguide/overview/k8s-setup/">cheat sheet</a>.</p>
<p>It is recommended you have a master node and one or more worker nodes. The examples in this documentation assume one master and two worker nodes.</p>
<p>After creating Kubernetes clusters, you can optionally:</p>
<ul>
<li>Configure an Ingress to direct traffic to backend domains.</li>
<li>Configure Kibana and Elasticsearch for your operator logs.</li>
</ul>
<h3 id="install-helm">Install Helm</h3>
<p>As per the <a href="../prerequisites">prerequisites</a> an installation of Helm is required to create and deploy the necessary resources and then run the operator in a Kubernetes cluster. For Helm installation and usage information, refer to the <a href="https://github.com/helm/helm">README</a>.</p>
<h3 id="check-the-kubernetes-cluster-is-ready">Check the Kubernetes cluster is ready</h3>
<p>Run the following command on the master node to check the cluster and worker nodes are running:</p>
<pre><code>$ kubectl get nodes,pods -n kube-system
</code></pre><p>The output will look similar to the following:</p>
<pre><code>$ kubectl get nodes,pods -n kube-system
NAME                STATUS   ROLES    AGE   VERSION
node/worker-node1   Ready    &lt;none&gt;   10d   v1.18.4
node/worker-node2   Ready    &lt;none&gt;   10d   v1.18.4
node/master-node    Ready    master   11d   v1.18.4

NAME                                      READY   STATUS    RESTARTS   AGE
pod/coredns-66bff467f8-slxdq              1/1     Running   0          11d
pod/coredns-66bff467f8-v77qt              1/1     Running   0          11d
pod/etcd-master-node                      1/1     Running   0          11d
pod/kube-apiserver-master-node            1/1     Running   0          11d
pod/kube-controller-manager-master-node   1/1     Running   0          11d
pod/kube-flannel-ds-amd64-dcqjn           1/1     Running   0          10d
pod/kube-flannel-ds-amd64-g4ztq           1/1     Running   0          11d
pod/kube-flannel-ds-amd64-vpcbj           1/1     Running   1          10d
pod/kube-proxy-jtcxm                      1/1     Running   0          11d
pod/kube-proxy-swfmm                      1/1     Running   0          10d
pod/kube-proxy-w6x6t                      1/1     Running   0          10d
pod/kube-scheduler-master-node            1/1     Running   0          11d
$
</code></pre><h3 id="install-the-oig-docker-image">Install the OIG Docker Image</h3>
<p>You can deploy OIG Docker images in the following ways:</p>
<ol>
<li>
<p>Download a prebuilt OIG Docker image from <a href="https://support.oracle.com">My Oracle Support</a> by referring to the document ID 2723908.1. This image is prebuilt by Oracle and includes Oracle Identity Governance 12.2.1.4.0 and the latest PSU.</p>
</li>
<li>
<p>Build your own OIG image using the WebLogic Image Tool or by using the dockerfile, scripts and base images from Oracle Container Registry (OCR). You can also build your own image by using only the dockerfile and scripts. For more information about the various ways in which you can build your own container image, see <a href="https://github.com/oracle/docker-images/tree/master/OracleIdentityGovernance/#building-the-oig-image">Building the OIG Docker Image</a>.</p>
</li>
</ol>
<p>Choose one of these options based on your requirements.</p>

<div class="notices note" ><p>The OIG Docker image must be installed on the master node AND each of the worker nodes in your Kubernetes cluster. Alternatively you can place the image in a Docker registry that your cluster can access.</p>
</div>

<p>After installing the OIG Docker image run the following command to make sure the image is installed correctly on the master and worker nodes:</p>
<pre><code>$ docker images
</code></pre><p>The output will look similar to the following:</p>
<pre><code>REPOSITORY                            TAG                 IMAGE ID            CREATED             SIZE
oracle/oig                            12.2.1.4.0          59ffc14dddbb        3 days ago          4.96GB
k8s.gcr.io/kube-proxy                 v1.18.4             718fa77019f2        6 weeks ago         117MB
k8s.gcr.io/kube-scheduler             v1.18.4             c663567f869e        6 weeks ago         95.3MB
k8s.gcr.io/kube-controller-manager    v1.18.4             e8f1690127c4        6 weeks ago         162MB
k8s.gcr.io/kube-apiserver             v1.18.4             408913fc18eb        6 weeks ago         173MB
quay.io/coreos/flannel                v0.12.0-amd64       4e9f801d2217        4 months ago        52.8MB
k8s.gcr.io/pause                      3.2                 80d28bedfe5d        5 months ago        683kB
k8s.gcr.io/coredns                    1.6.7               67da37a9a360        6 months ago        43.8MB
k8s.gcr.io/etcd                       3.4.3-0             303ce5db0e90        9 months ago        288MB
</code></pre><h3 id="install-the-oracle-weblogic-server-kubernetes-operator-docker-image">Install the Oracle WebLogic Server Kubernetes Operator Docker Image</h3>
<p>In this release only Oracle WebLogic Server Kubernetes Operator 3.0.1 is supported.</p>

<div class="notices note" ><p>The Oracle WebLogic Server Kubernetes Operator Docker image must be installed on the master node and each of the worker nodes in your Kubernetes cluster. Alternatively you can place the image in a Docker registry that your cluster can access.</p>
</div>

<ol>
<li>
<p>Pull the Oracle WebLogic Server Kubernetes Operator 3.0.1 image by running the following command on the master node:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker pull ghcr.io/oracle/weblogic-kubernetes-operator:3.0.1
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Trying to pull repository ghcr.io/oracle/weblogic-kubernetes-operator ...
3.0.1: Pulling from ghcr.io/oracle/weblogic-kubernetes-operator
bce8f778fef0: Already exists
de14ddc50a70: Pull complete
77401a861078: Pull complete
9c5ac1423af4: Pull complete
2b6f244f998f: Pull complete
625e05083092: Pull complete
Digest: sha256:27047d032ac5a9077b39bec512b99d8ca54bf9bf71227f5fd1b7b26ac80c20d3
Status: Downloaded newer image <span style="color:#66d9ef">for</span> ghcr.io/oracle/weblogic-kubernetes-operator:3.0.1
ghcr.io/oracle/weblogic-kubernetes-operator:3.0.1
</code></pre></div></li>
<li>
<p>Run the docker tag command as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker tag ghcr.io/oracle/weblogic-kubernetes-operator:3.0.1  weblogic-kubernetes-operator:3.0.1
</code></pre></div><p>After installing the Oracle WebLogic Server Kubernetes Operator 3.0.1 Docker image, repeat the above on the worker nodes.</p>
</li>
</ol>
<h3 id="setup-the-code-repository-to-deploy-oracle-identity-governance-domains">Setup the Code Repository to Deploy Oracle Identity Governance Domains</h3>
<p>Oracle Identity Governance domain deployment on Kubernetes leverages the Oracle WebLogic Kubernetes Operator infrastructure. For deploying the Oracle Identity Governance domains, you need to set up the deployment scripts on the <strong>master</strong> node as below:</p>
<ol>
<li>
<p>Create a working directory to setup the source code.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir &lt;work directory&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir /scratch/OIGDockerK8S
</code></pre></div></li>
<li>
<p>Download the supported version of the Oracle WebLogic Kubernetes Operator source code from the operator github project. Currently the supported operator version is <a href="https://github.com/oracle/weblogic-kubernetes-operator/releases/tag/v3.0.1">3.0.1</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd &lt;work directory&gt;
$ git clone https://github.com/oracle/weblogic-kubernetes-operator.git --branch release/3.0.1
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /scratch/OIGDockerK8S
$ git clone https://github.com/oracle/weblogic-kubernetes-operator.git --branch release/3.0.1
</code></pre></div><p>This will create the directory <code>&lt;work directory&gt;/weblogic-kubernetes-operator</code></p>
</li>
<li>
<p>Clone the Oracle Identity Governance deployment scripts from the OIG <a href="https://github.com/oracle/fmw-kubernetes.git">repository</a> and copy them into the WebLogic operator samples location.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/oracle/fmw-kubernetes.git
$ cp -rf &lt;work directory&gt;/fmw-kubernetes/OracleIdentityGovernance/kubernetes/3.0.1/create-oim-domain  &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/scripts/
$ mv -f &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/charts/ingress-per-domain  &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/charts/ingress-per-domain_backup
$ cp -rf &lt;work directory&gt;/fmw-kubernetes/OracleIdentityGovernance/kubernetes/3.0.1/ingress-per-domain &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/charts/ingress-per-domain
$ cp -rf &lt;work directory&gt;/fmw-kubernetes/OracleIdentityGovernance/kubernetes/3.0.1/design-console-ingress &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/charts/design-console-ingress
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/oracle/fmw-kubernetes.git
$ cp -rf /scratch/OIGDockerK8S/fmw-kubernetes/OracleIdentityGovernance/kubernetes/3.0.1/create-oim-domain  /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/scripts/
$ mv -f /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/charts/ingress-per-domain  /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/charts/ingress-per-domain_backup
$ cp -rf /scratch/OIGDockerK8S/fmw-kubernetes/OracleIdentityGovernance/kubernetes/3.0.1/ingress-per-domain /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/charts/ingress-per-domain
cp -rf /scratch/OIGDockerK8S/fmw-kubernetes/OracleIdentityGovernance/kubernetes/3.0.1/design-console-ingress /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/charts/design-console-ingress
</code></pre></div><p>You can now use the deployment scripts from <code>&lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/scripts/</code> to set up the OIG domains as further described in this document.</p>
</li>
<li>
<p>Run the following command and see if the WebLogic custom resource definition name already exists:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get crd
</code></pre></div><p>In the output you should see:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">No resources found in default namespace.
</code></pre></div><p>If you see the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">NAME                    AGE
domains.weblogic.oracle 5d
</code></pre></div><p>then run the following command to delete the existing crd:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl delete crd domains.weblogic.oracle
customresourcedefinition.apiextensions.k8s.io <span style="color:#e6db74">&#34;domains.weblogic.oracle&#34;</span> deleted
</code></pre></div></li>
</ol>
<h3 id="install-the-oracle-weblogic-kubernetes-operator">Install the Oracle WebLogic Kubernetes Operator</h3>
<ol>
<li>
<p>On the <strong>master</strong> node run the following command to create a namespace for the operator:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create namespace &lt;sample-kubernetes-operator-ns&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create namespace operator
</code></pre></div><p>The output will look similar to the following:</p>
<pre><code>namespace/operator created
</code></pre></li>
<li>
<p>Create a service account for the operator in the operator&rsquo;s namespace by running the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create serviceaccount -n &lt;sample-kubernetes-operator-ns&gt; &lt;sample-kubernetes-operator-sa&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create serviceaccount -n operator operator-serviceaccount
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">serviceaccount/operator-serviceaccount created
</code></pre></div></li>
<li>
<p>If you want to setup logging and visualisation with Elasticsearch and Kibana (post domain creation) edit the <code>&lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/charts/weblogic-operator/values.yaml</code> and set the parameter <code>elkIntegrationEnabled</code> to <code>true</code> and make sure the following parameters are set:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># elkIntegrationEnabled specifies whether or not ELK integration is enabled.</span>
elkIntegrationEnabled: true
   
<span style="color:#75715e"># logStashImage specifies the docker image containing logstash.</span>
<span style="color:#75715e"># This parameter is ignored if &#39;elkIntegrationEnabled&#39; is false.</span>
logStashImage: <span style="color:#e6db74">&#34;logstash:6.6.0&#34;</span>
 
<span style="color:#75715e"># elasticSearchHost specifies the hostname of where elasticsearch is running.</span>
<span style="color:#75715e"># This parameter is ignored if &#39;elkIntegrationEnabled&#39; is false.</span>
elasticSearchHost: <span style="color:#e6db74">&#34;elasticsearch.default.svc.cluster.local&#34;</span>
 
<span style="color:#75715e"># elasticSearchPort specifies the port number of where elasticsearch is running.</span>
<span style="color:#75715e"># This parameter is ignored if &#39;elkIntegrationEnabled&#39; is false.</span>
elasticSearchPort: <span style="color:#ae81ff">9200</span>
</code></pre></div><p>After the domain creation see <a href="../manage-oam-domains/logging-and-visualization">Logging and Visualization</a> in order to complete the setup of Elasticsearch and Kibana.</p>
</li>
<li>
<p>Run the following helm command to install and start the operator:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd &lt;work directory&gt;/weblogic-kubernetes-operator
$ helm install kubernetes/charts/weblogic-operator <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--namespace &lt;sample-kubernetes-operator-ns&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--set image<span style="color:#f92672">=</span>weblogic-kubernetes-operator:3.0.1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--set serviceAccount<span style="color:#f92672">=</span>&lt;sample-kubernetes-operator-sa&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--set <span style="color:#e6db74">&#34;domainNamespaces={}&#34;</span>
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /scratch/OIGDockerK8S/weblogic-kubernetes-operator
$ helm install weblogic-kubernetes-operator kubernetes/charts/weblogic-operator <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--namespace operator <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--set image<span style="color:#f92672">=</span>weblogic-kubernetes-operator:3.0.1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--set serviceAccount<span style="color:#f92672">=</span>operator-serviceaccount <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--set <span style="color:#e6db74">&#34;domainNamespaces={}&#34;</span> 
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">NAME: weblogic-kubernetes-operator
LAST DEPLOYED: Tue Sep <span style="color:#ae81ff">29</span> 02:33:06 <span style="color:#ae81ff">2020</span>
NAMESPACE: operator
STATUS: deployed
REVISION: <span style="color:#ae81ff">1</span>
TEST SUITE: None
</code></pre></div></li>
<li>
<p>Verify that the operator&rsquo;s pod is running by executing the following command to list the pods in the operator&rsquo;s namespace:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get all -n &lt;sample-kubernetes-operator-ns&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get all -n operator
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">NAME                                     READY   STATUS    RESTARTS   AGE
pod/weblogic-operator-5d5dfb74ff-t7ct5   2/2     Running   <span style="color:#ae81ff">0</span>          17m

NAME                                     TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>    AGE
service/internal-weblogic-operator-svc   ClusterIP   10.101.11.127   &lt;none&gt;        8082/TCP   17m

NAME                                READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/weblogic-operator   1/1     <span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">1</span>           17m

NAME                                           DESIRED   CURRENT   READY   AGE
replicaset.apps/weblogic-operator-5d5dfb74ff   <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>       17m
</code></pre></div></li>
<li>
<p>Verify that the operator is up and running by viewing the operator pod&rsquo;s log:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl logs -n &lt;sample-kubernetes-operator-ns&gt; -c weblogic-operator deployments/weblogic-operator
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl logs -n operator -c weblogic-operator deployments/weblogic-operator
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">{</span><span style="color:#e6db74">&#34;timestamp&#34;</span>:<span style="color:#e6db74">&#34;09-29-2020T09:33:26.284+0000&#34;</span>,<span style="color:#e6db74">&#34;thread&#34;</span>:27,<span style="color:#e6db74">&#34;fiber&#34;</span>:<span style="color:#e6db74">&#34;fiber-1&#34;</span>,<span style="color:#e6db74">&#34;namespace&#34;</span>:<span style="color:#e6db74">&#34;operator&#34;</span>,<span style="color:#e6db74">&#34;domainUID&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;level&#34;</span>:<span style="color:#e6db74">&#34;WARNING&#34;</span>,<span style="color:#e6db74">&#34;class&#34;</span>:<span style="color:#e6db74">&#34;oracle.kubernetes.operator.utils.Certificates&#34;</span>,<span style="color:#e6db74">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;getCertificate&#34;</span>,<span style="color:#e6db74">&#34;timeInMillis&#34;</span>:1601372006284,<span style="color:#e6db74">&#34;message&#34;</span>:<span style="color:#e6db74">&#34;No external certificate configured for REST endpoint. Endpoint will be disabled.&#34;</span>,<span style="color:#e6db74">&#34;exception&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;code&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;headers&#34;</span>:<span style="color:#f92672">{}</span>,<span style="color:#e6db74">&#34;body&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">}</span>
<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;timestamp&#34;</span>:<span style="color:#e6db74">&#34;09-29-2020T09:33:28.611+0000&#34;</span>,<span style="color:#e6db74">&#34;thread&#34;</span>:27,<span style="color:#e6db74">&#34;fiber&#34;</span>:<span style="color:#e6db74">&#34;fiber-1&#34;</span>,<span style="color:#e6db74">&#34;namespace&#34;</span>:<span style="color:#e6db74">&#34;operator&#34;</span>,<span style="color:#e6db74">&#34;domainUID&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;level&#34;</span>:<span style="color:#e6db74">&#34;INFO&#34;</span>,<span style="color:#e6db74">&#34;class&#34;</span>:<span style="color:#e6db74">&#34;oracle.kubernetes.operator.rest.RestServer&#34;</span>,<span style="color:#e6db74">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;start&#34;</span>,<span style="color:#e6db74">&#34;timeInMillis&#34;</span>:1601372008611,<span style="color:#e6db74">&#34;message&#34;</span>:<span style="color:#e6db74">&#34;Started the internal ssl REST server on https://0.0.0.0:8082/operator&#34;</span>,<span style="color:#e6db74">&#34;exception&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;code&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;headers&#34;</span>:<span style="color:#f92672">{}</span>,<span style="color:#e6db74">&#34;body&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">}</span>
<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;timestamp&#34;</span>:<span style="color:#e6db74">&#34;09-29-2020T09:33:28.613+0000&#34;</span>,<span style="color:#e6db74">&#34;thread&#34;</span>:27,<span style="color:#e6db74">&#34;fiber&#34;</span>:<span style="color:#e6db74">&#34;fiber-1&#34;</span>,<span style="color:#e6db74">&#34;namespace&#34;</span>:<span style="color:#e6db74">&#34;operator&#34;</span>,<span style="color:#e6db74">&#34;domainUID&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;level&#34;</span>:<span style="color:#e6db74">&#34;INFO&#34;</span>,<span style="color:#e6db74">&#34;class&#34;</span>:<span style="color:#e6db74">&#34;oracle.kubernetes.operator.Main&#34;</span>,<span style="color:#e6db74">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;markReadyAndStartLivenessThread&#34;</span>,<span style="color:#e6db74">&#34;timeInMillis&#34;</span>:1601372008613,<span style="color:#e6db74">&#34;message&#34;</span>:<span style="color:#e6db74">&#34;Starting Operator Liveness Thread&#34;</span>,<span style="color:#e6db74">&#34;exception&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;code&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;headers&#34;</span>:<span style="color:#f92672">{}</span>,<span style="color:#e6db74">&#34;body&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">}</span>
</code></pre></div></li>
</ol>
<h3 id="rcu-schema-creation">RCU schema creation</h3>
<p>In this section you create the RCU schemas in the Oracle Database.</p>
<p>Before following the steps in this section, make sure that the database and listener are up and running and you can connect to the database via SQL*Plus or other client tool.</p>
<ol>
<li>
<p>Run the following command to create a namespace for the domain:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create namespace &lt;domain_namespace&gt;
</code></pre></div><p>For example:</p>
<pre><code>$ kubectl create namespace oimcluster
</code></pre><p>The output will look similar to the following:</p>
<pre><code>namespace/oimcluster created
</code></pre><p>Run the following command to create a helper pod:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl run helper --image &lt;image_name&gt; -n &lt;domain_namespace&gt; -- sleep infinity
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl run helper --image oracle/oig:12.2.1.4.0 -n oimcluster -- sleep infinity
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pod/helper created
</code></pre></div></li>
<li>
<p>Run the following command to start a bash shell in the helper pod:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl exec -it helper -n &lt;domain_namespace&gt; -- /bin/bash
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl exec -it helper -n oimcluster -- /bin/bash
</code></pre></div><p>This will take you into a bash shell in the running rcu pod:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$
</code></pre></div></li>
<li>
<p>In the helper bash shell run the following commands to set the environment:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export DB_HOST<span style="color:#f92672">=</span>&lt;db_host.domain&gt;
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export DB_PORT<span style="color:#f92672">=</span>&lt;db_port&gt;
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export DB_SERVICE<span style="color:#f92672">=</span>&lt;service_name&gt;
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export RCUPREFIX<span style="color:#f92672">=</span>&lt;rcu_schema_prefix&gt;
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export RCU_SCHEMA_PWD<span style="color:#f92672">=</span>&lt;rcu_schema_pwd&gt;
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ echo -e &lt;db_pwd&gt;<span style="color:#e6db74">&#34;\n&#34;</span>&lt;rcu_schema_pwd&gt; &gt; /tmp/pwd.txt
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ cat /tmp/pwd.txt
</code></pre></div><p>where:</p>
<p><code>&lt;db_host.domain&gt;</code> is the database server hostname</p>
<p><code>&lt;db_port&gt;</code> is the database listener port</p>
<p><code>&lt;service_name&gt;</code> is the database service name</p>
<p><code>&lt;rcu_schema_prefix&gt;</code> is the RCU schema prefix you want to set</p>
<p><code>&lt;rcu_schema_pwd&gt;</code> is the password you want to set for the <code>&lt;rcu_schema_prefix&gt;</code></p>
<p><code>&lt;db_pwd&gt;</code> is the SYS password for the database</p>
<p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export DB_HOST<span style="color:#f92672">=</span>mydatabasehost.example.com
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export DB_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">1521</span>
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export DB_SERVICE<span style="color:#f92672">=</span>orcl.example.com
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export RCUPREFIX<span style="color:#f92672">=</span>OIGK8S
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ export RCU_SCHEMA_PWD<span style="color:#f92672">=</span>&lt;password&gt;
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ echo -e &lt;password&gt;<span style="color:#e6db74">&#34;\n&#34;</span>&lt;password&gt; &gt; /tmp/pwd.txt
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ cat /tmp/pwd.txt
&lt;password&gt;
&lt;password&gt;
</code></pre></div></li>
<li>
<p>In the helper bash shell run the following commands to create the RCU schemas in the database:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ /u01/oracle/oracle_common/bin/rcu -silent -createRepository -databaseType ORACLE -connectString <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>$DB_HOST:$DB_PORT/$DB_SERVICE -dbUser sys -dbRole sysdba -useSamePasswordForAllSchemaUsers true <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-selectDependentsForComponents true -schemaPrefix $RCUPREFIX -component OIM -component MDS -component SOAINFRA -component OPSS <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-f &lt; /tmp/pwd.txt
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">RCU Logfile: /tmp/RCU2020-09-29_10-51_508080961/logs/rcu.log

Processing command line ....
Repository Creation Utility - Checking Prerequisites
Checking Global Prerequisites


Repository Creation Utility - Checking Prerequisites
Checking Component Prerequisites
Repository Creation Utility - Creating Tablespaces
Validating and Creating Tablespaces
Create tablespaces in the repository database
Repository Creation Utility - Create
Repository Create in progress.
        Percent Complete: <span style="color:#ae81ff">10</span>
Executing pre create operations
        Percent Complete: <span style="color:#ae81ff">25</span>
        Percent Complete: <span style="color:#ae81ff">25</span>
        Percent Complete: <span style="color:#ae81ff">26</span>
        Percent Complete: <span style="color:#ae81ff">27</span>
        Percent Complete: <span style="color:#ae81ff">28</span>
        Percent Complete: <span style="color:#ae81ff">28</span>
        Percent Complete: <span style="color:#ae81ff">29</span>
        Percent Complete: <span style="color:#ae81ff">29</span>
Creating Common Infrastructure Services<span style="color:#f92672">(</span>STB<span style="color:#f92672">)</span>
        Percent Complete: <span style="color:#ae81ff">36</span>
        Percent Complete: <span style="color:#ae81ff">36</span>
        Percent Complete: <span style="color:#ae81ff">44</span>
        Percent Complete: <span style="color:#ae81ff">44</span>
        Percent Complete: <span style="color:#ae81ff">44</span>
Creating Audit Services Append<span style="color:#f92672">(</span>IAU_APPEND<span style="color:#f92672">)</span>
        Percent Complete: <span style="color:#ae81ff">51</span>
        Percent Complete: <span style="color:#ae81ff">51</span>
        Percent Complete: <span style="color:#ae81ff">59</span>
        Percent Complete: <span style="color:#ae81ff">59</span>
        Percent Complete: <span style="color:#ae81ff">59</span>
Creating Audit Services Viewer<span style="color:#f92672">(</span>IAU_VIEWER<span style="color:#f92672">)</span>
        Percent Complete: <span style="color:#ae81ff">66</span>
        Percent Complete: <span style="color:#ae81ff">66</span>
        Percent Complete: <span style="color:#ae81ff">67</span>
        Percent Complete: <span style="color:#ae81ff">67</span>
        Percent Complete: <span style="color:#ae81ff">68</span>
        Percent Complete: <span style="color:#ae81ff">68</span>
Creating Metadata Services<span style="color:#f92672">(</span>MDS<span style="color:#f92672">)</span>
        Percent Complete: <span style="color:#ae81ff">76</span>
        Percent Complete: <span style="color:#ae81ff">76</span>
        Percent Complete: <span style="color:#ae81ff">76</span>
        Percent Complete: <span style="color:#ae81ff">77</span>
        Percent Complete: <span style="color:#ae81ff">77</span>
        Percent Complete: <span style="color:#ae81ff">78</span>
        Percent Complete: <span style="color:#ae81ff">78</span>
        Percent Complete: <span style="color:#ae81ff">78</span>
Creating Weblogic Services<span style="color:#f92672">(</span>WLS<span style="color:#f92672">)</span>
        Percent Complete: <span style="color:#ae81ff">82</span>
        Percent Complete: <span style="color:#ae81ff">82</span>
        Percent Complete: <span style="color:#ae81ff">83</span>
        Percent Complete: <span style="color:#ae81ff">84</span>
        Percent Complete: <span style="color:#ae81ff">86</span>
        Percent Complete: <span style="color:#ae81ff">88</span>
        Percent Complete: <span style="color:#ae81ff">88</span>
        Percent Complete: <span style="color:#ae81ff">88</span>
Creating User Messaging Service<span style="color:#f92672">(</span>UCSUMS<span style="color:#f92672">)</span>
        Percent Complete: <span style="color:#ae81ff">92</span>
        Percent Complete: <span style="color:#ae81ff">92</span>
        Percent Complete: <span style="color:#ae81ff">95</span>
        Percent Complete: <span style="color:#ae81ff">95</span>
        Percent Complete: <span style="color:#ae81ff">100</span>
Creating Audit Services<span style="color:#f92672">(</span>IAU<span style="color:#f92672">)</span>
Creating Oracle Platform Security Services<span style="color:#f92672">(</span>OPSS<span style="color:#f92672">)</span>
Creating SOA Infrastructure<span style="color:#f92672">(</span>SOAINFRA<span style="color:#f92672">)</span>
Creating Oracle Identity Manager<span style="color:#f92672">(</span>OIM<span style="color:#f92672">)</span>
Executing post create operations

Repository Creation Utility: Create - Completion Summary

Database details:
-----------------------------
Host Name                                    : mydatabasehost.example.com
Port                                         : <span style="color:#ae81ff">1521</span>
Service Name                                 : ORCL.EXAMPLE.COM
Connected As                                 : sys
Prefix <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>prefixable<span style="color:#f92672">)</span> Schema Owners        : OIGK8S
RCU Logfile                                  : /tmp/RCU2020-09-29_10-51_508080961/logs/rcu.log

Component schemas created:
-----------------------------
Component                                    Status         Logfile

Common Infrastructure Services               Success        /tmp/RCU2020-09-29_10-51_508080961/logs/stb.log
Oracle Platform Security Services            Success        /tmp/RCU2020-09-29_10-51_508080961/logs/opss.log
SOA Infrastructure                           Success        /tmp/RCU2020-09-29_10-51_508080961/logs/soainfra.log
Oracle Identity Manager                      Success        /tmp/RCU2020-09-29_10-51_508080961/logs/oim.log
User Messaging Service                       Success        /tmp/RCU2020-09-29_10-51_508080961/logs/ucsums.log
Audit Services                               Success        /tmp/RCU2020-09-29_10-51_508080961/logs/iau.log
Audit Services Append                        Success        /tmp/RCU2020-09-29_10-51_508080961/logs/iau_append.log
Audit Services Viewer                        Success        /tmp/RCU2020-09-29_10-51_508080961/logs/iau_viewer.log
Metadata Services                            Success        /tmp/RCU2020-09-29_10-51_508080961/logs/mds.log
WebLogic Services                            Success        /tmp/RCU2020-09-29_10-51_508080961/logs/wls.log

Repository Creation Utility - Create : Operation Completed
<span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$
</code></pre></div></li>
<li>
<p>Run the following command to patch schemas in the database:</p>

<div class="notices note" ><p>This command should be run if you are using an OIG image that contains OIG bundle patches. If using an OIG image without OIG bundle patches, then you can skip this step.</p>
</div>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ /u01/oracle/oracle_common/modules/thirdparty/org.apache.ant/1.10.5.0.0/apache-ant-1.10.5/bin/ant <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-f /u01/oracle/idm/server/setup/deploy-files/automation.xml <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>run-patched-sql-files <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-logger org.apache.tools.ant.NoBannerLogger <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-logfile /u01/oracle/idm/server/bin/patch_oim_wls.log <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-DoperationsDB.host<span style="color:#f92672">=</span>$DB_HOST <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-DoperationsDB.port<span style="color:#f92672">=</span>$DB_PORT <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-DoperationsDB.serviceName<span style="color:#f92672">=</span>$DB_SERVICE <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-DoperationsDB.user<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>RCUPREFIX<span style="color:#e6db74">}</span>_OIM <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-DOIM.DBPassword<span style="color:#f92672">=</span>$RCU_SCHEMA_PWD <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-Dojdbc<span style="color:#f92672">=</span>/u01/oracle/oracle_common/modules/oracle.jdbc/ojdbc8.jar
</code></pre></div><p>The output will look similar to the following:</p>
<pre><code>Buildfile: /u01/oracle/idm/server/setup/deploy-files/automation.xml
</code></pre></li>
<li>
<p>Verify the database was patched successfully by viewing the <code>patch_oim_wls.log</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>oracle@helper oracle<span style="color:#f92672">]</span>$ cat /u01/oracle/idm/server/bin/patch_oim_wls.log
</code></pre></div><p>The output should look similar to below:</p>
<pre><code>run-patched-sql-files:
   [sql] Executing resource: /u01/oracle/idm/server/db/oim/oracle/StoredProcedures/API/oim_role_mgmt_pkg_body.sql
   [sql] Executing resource: /u01/oracle/idm/server/db/oim/oracle/Upgrade/oim12cps4/list/oim12cps4_dml_pty_insert_sysprop_ssointg_grprecon_matching_rolename.sql
   [sql] Executing resource: /u01/oracle/idm/server/db/oim/oracle/Upgrade/oim12cps4/list/oim12cps4_dml_pty_insert_sysprop_oimadpswdpolicy.sql
   [sql] 3 of 3 SQL statements executed successfully

BUILD SUCCESSFUL
Total time: 1 second
</code></pre></li>
<li>
<p>Exit the helper bash shell by issuing the command <code>exit</code>.</p>
</li>
</ol>
<h3 id="preparing-the-environment-for-domain-creation">Preparing the environment for domain creation</h3>
<p>In this section you prepare the environment for the OIG domain creation. This involves the following steps:</p>
<ol>
<li>Configure the operator for the domain namespace</li>
<li>Create Kubernetes secrets for the domain and RCU</li>
<li>Create a Kubernetes PV and PVC (Persistent Volume and Persistent Volume Claim)</li>
</ol>
<h4 id="configure-the-operator-for-the-domain-namespace">Configure the operator for the domain namespace</h4>
<ol>
<li>
<p>Configure the Oracle WebLogic Kubernetes Operator to manage the domain in the domain namespace by running the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd &lt;work directory&gt;/weblogic-kubernetes-operator
$ helm upgrade --reuse-values --namespace &lt;operator_namespace&gt; --set <span style="color:#e6db74">&#34;domainNamespaces={oimcluster}&#34;</span> --wait weblogic-kubernetes-operator kubernetes/charts/weblogic-operator
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /scratch/OIGDockerK8S/weblogic-kubernetes-operator
$ helm upgrade --reuse-values --namespace operator --set <span style="color:#e6db74">&#34;domainNamespaces={oimcluster}&#34;</span> --wait weblogic-kubernetes-operator kubernetes/charts/weblogic-operator
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Release <span style="color:#e6db74">&#34;weblogic-kubernetes-operator&#34;</span> has been upgraded. Happy Helming!
NAME: weblogic-kubernetes-operator
LAST DEPLOYED: Tue Sep <span style="color:#ae81ff">29</span> 04:01:43 <span style="color:#ae81ff">2020</span>
NAMESPACE: operator
STATUS: deployed
REVISION: <span style="color:#ae81ff">2</span>
TEST SUITE: None
</code></pre></div></li>
</ol>
<h4 id="creating-kubernetes-secrets-for-the-domain-and-rcu">Creating Kubernetes secrets for the domain and RCU</h4>
<ol>
<li>
<p>Create a Kubernetes secret for the domain using the create-weblogic-credentials script in the same Kubernetes namespace as the domain:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-weblogic-domain-credentials
$ ./create-weblogic-credentials.sh -u weblogic -p &lt;pwd&gt; -n &lt;domain_namespace&gt; -d &lt;domain_uid&gt; -s &lt;kubernetes_domain_secret&gt;
</code></pre></div><p>where:</p>
<p><code>-u weblogic</code> is the WebLogic username</p>
<p><code>-p &lt;pwd&gt;</code> is the password for the WebLogic user</p>
<p><code>-n &lt;domain_namespace&gt;</code> is the domain namespace</p>
<p><code>-d &lt;domain_uid&gt;</code> is the domain UID to be created. The default is domain1 if not specified</p>
<p><code>-s &lt;kubernetes_domain_secret&gt;</code> is the name you want to create for the secret for this namespace. The default is to use the domainUID if not specified</p>
<p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-weblogic-domain-credentials
$ ./create-weblogic-credentials.sh -u weblogic -p &lt;password&gt; -n oimcluster -d oimcluster -s oimcluster-domain-credentials
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">secret/oimcluster-domain-credentials created
secret/oimcluster-domain-credentials labeled
The secret oimcluster-domain-credentials has been successfully created in the oimcluster namespace.
</code></pre></div></li>
<li>
<p>Verify the secret is created using the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret &lt;kubernetes_domain_secret&gt; -o yaml -n &lt;domain_namespace&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret oimcluster-domain-credentials -o yaml -n oimcluster
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret oimcluster-domain-credentials -o yaml -n oimcluster
apiVersion: v1
data:
  password: V2VsY29tZTE<span style="color:#f92672">=</span>
  username: d2VibG9naWM<span style="color:#f92672">=</span>
kind: Secret
metadata:
  creationTimestamp: <span style="color:#e6db74">&#34;2020-09-29T11:04:44Z&#34;</span>
  labels:
    weblogic.domainName: oimcluster
    weblogic.domainUID: oimcluster
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: <span style="color:#f92672">{}</span>
        f:password: <span style="color:#f92672">{}</span>
        f:username: <span style="color:#f92672">{}</span>
      f:metadata:
        f:labels:
          .: <span style="color:#f92672">{}</span>
          f:weblogic.domainName: <span style="color:#f92672">{}</span>
          f:weblogic.domainUID: <span style="color:#f92672">{}</span>
      f:type: <span style="color:#f92672">{}</span>
    manager: kubectl
    operation: Update
    time: <span style="color:#e6db74">&#34;2020-09-29T11:04:44Z&#34;</span>
  name: oimcluster-domain-credentials
  namespace: oimcluster
  resourceVersion: <span style="color:#e6db74">&#34;1249007&#34;</span>
  selfLink: /api/v1/namespaces/oimcluster/secrets/oimcluster-domain-credentials
  uid: 4ade08f3-7b11-4bb0-9340-7304a2ef9b64
type: Opaque
</code></pre></div></li>
<li>
<p>Create a Kubernetes secret for RCU in the same Kubernetes namespace as the domain, using the <code>create-weblogic-credentials.sh</code> script:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-rcu-credentials
$ ./create-rcu-credentials.sh -u &lt;rcu_prefix&gt; -p &lt;rcu_schema_pwd&gt; -a sys -q &lt;sys_db_pwd&gt; -d &lt;domain_uid&gt; -n &lt;domain_namespace&gt; -s &lt;kubernetes_rcu_secret&gt;
</code></pre></div><p>where:</p>
<p><code>-u &lt;rcu_prefix&gt;</code> is the name of the RCU schema prefix created previously</p>
<p><code>-p &lt;rcu_schema_pwd&gt;</code> is the password for the RCU schema prefix</p>
<p><code>-q &lt;sys_db_pwd&gt;</code> is the sys database password</p>
<p><code>-d &lt;domain_uid&gt;</code> is the domain_uid that you created earlier</p>
<p><code>-n &lt;domain_namespace&gt;</code> is the domain namespace</p>
<p><code>-s &lt;kubernetes_rcu_secret&gt;</code> is the name of the rcu secret to create</p>
<p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-rcu-credentials
$ ./create-rcu-credentials.sh -u OIGK8S -p &lt;password&gt; -a sys -q &lt;password&gt; -d oimcluster -n oimcluster -s oimcluster-rcu-credentials
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">secret/oimcluster-rcu-credentials created
secret/oimcluster-rcu-credentials labeled
The secret oimcluster-rcu-credentials has been successfully created in the oimcluster namespace.
</code></pre></div></li>
<li>
<p>Verify the secret is created using the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret &lt;kubernetes_rcu_secret&gt; -o yaml -n &lt;domain_namespace&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret oimcluster-rcu-credentials -o yaml -n oimcluster
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">apiVersion: v1
data:
  password: V2VsY29tZTE<span style="color:#f92672">=</span>
  sys_password: V2VsY29tZTE<span style="color:#f92672">=</span>
  sys_username: c3lz
  username: T0lHSzhT
kind: Secret
metadata:
   creationTimestamp: <span style="color:#e6db74">&#34;2020-09-29T11:18:45Z&#34;</span>
  labels:
    weblogic.domainName: oimcluster
    weblogic.domainUID: oimcluster
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: <span style="color:#f92672">{}</span>
        f:password: <span style="color:#f92672">{}</span>
        f:sys_password: <span style="color:#f92672">{}</span>
        f:sys_username: <span style="color:#f92672">{}</span>
        f:username: <span style="color:#f92672">{}</span>
      f:metadata:
        f:labels:
          .: <span style="color:#f92672">{}</span>
          f:weblogic.domainName: <span style="color:#f92672">{}</span>
          f:weblogic.domainUID: <span style="color:#f92672">{}</span>
      f:type: <span style="color:#f92672">{}</span>
    manager: kubectl
    operation: Update
    time: <span style="color:#e6db74">&#34;2020-09-29T11:18:45Z&#34;</span>
  name: oimcluster-rcu-credentials
  namespace: oimcluster
  resourceVersion: <span style="color:#e6db74">&#34;1251020&#34;</span>
  selfLink: /api/v1/namespaces/oimcluster/secrets/oimcluster-rcu-credentials
  uid: aee4213e-ffe2-45a6-9b96-11c4e88d12f2
type: Opaque
</code></pre></div></li>
</ol>
<h3 id="create-a-kubernetes-persistent-volume-and-persistent-volume-claim">Create a Kubernetes persistent volume and persistent volume claim</h3>
<p>In the Kubernetes domain namespace created above, create the persistent volume (PV) and persistent volume claim (PVC)  by running the <code>create-pv-pvc.sh</code> script.</p>
<ol>
<li>
<p>Make a backup copy of the <code>create-pv-pvc-inputs.yaml</code> file and create required directories:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd &lt;work directory&gt;/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-weblogic-domain-pv-pvc
$ cp create-pv-pvc-inputs.yaml create-pv-pvc-inputs.yaml.orig
$ mkdir output_oimcluster
$ mkdir -p /&lt;work directory&gt;/oimclusterdomainpv
$ chmod -R <span style="color:#ae81ff">777</span> /&lt;work directory&gt;/oimclusterdomainpv
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd /scratch/OIGDockerK8S/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-weblogic-domain-pv-pvc
$ cp create-pv-pvc-inputs.yaml create-pv-pvc-inputs.yaml.orig
$ mkdir output_oimcluster
$ mkdir -p /scratch/OIGDockerK8S/oimclusterdomainpv
$ chmod -R <span style="color:#ae81ff">777</span> /scratch/OIGDockerK8S/oimclusterdomainpv
</code></pre></div><p><strong>Note</strong>: The persistent volume directory needs to be accessible to both the master and worker node(s) via NFS. Make sure this path has <strong>full</strong> access permissions, and that the folder is empty. In this example <code>/scratch/OIGDockerK8S/oimclusterdomainpv</code> is accessible from all nodes via NFS.</p>
</li>
<li>
<p>On the master node run the following command to ensure it is possible to read and write to the persistent volume:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd /&lt;work directory&gt;/oimclusterdomainpv
touch filemaster.txt
ls filemaster.txt
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd /scratch/OIGDockerK8S/oimclusterdomainpv
touch filemaster.txt
ls filemaster.txt
</code></pre></div><p>On the first worker node run the following to ensure it is possible to read and write to the persistent volume:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd /scratch/OIGDockerK8S/oimclusterdomainpv
ls filemaster.txt
touch fileworker1.txt
ls fileworker1.txt
</code></pre></div><p>Repeat the above for any other worker nodes e.g fileworker2.txt etc. Once proven that it&rsquo;s possible to read and write from each node to the persistent volume, delete the files created.</p>
</li>
<li>
<p>Edit the <code>create-pv-pvc-inputs.yaml</code> file and update the following parameters to reflect your settings. Save the file when complete:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">baseName: &lt;domain&gt;
domainUID: &lt;domain_uid&gt;
namespace: &lt;domain_namespace&gt;
weblogicDomainStorageType: NFS
weblogicDomainStorageNFSServer: &lt;nfs_server&gt;
weblogicDomainStoragePath: &lt;physical_path_of_persistent_storage&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># The base name of the pv and pvc</span>
baseName: oim

<span style="color:#75715e"># Unique ID identifying a domain.</span>
<span style="color:#75715e"># If left empty, the generated pv can be shared by multiple domains</span>
<span style="color:#75715e"># This ID must not contain an underscope (&#34;_&#34;), and must be lowercase and unique across all domains in a Kubernetes cluster.</span>
domainUID: oimcluster

<span style="color:#75715e"># Name of the namespace for the persistent volume claim</span>
namespace: oimcluster

<span style="color:#75715e"># Persistent volume type for the persistent storage.</span>
<span style="color:#75715e"># The value must be &#39;HOST_PATH&#39; or &#39;NFS&#39;.</span>
<span style="color:#75715e"># If using &#39;NFS&#39;, weblogicDomainStorageNFSServer must be specified.</span>
weblogicDomainStorageType: NFS

<span style="color:#75715e"># The server name or ip address of the NFS server to use for the persistent storage.</span>
<span style="color:#75715e"># The following line must be uncomment and customized if weblogicDomainStorateType is NFS:</span>
weblogicDomainStorageNFSServer: mynfsserver

<span style="color:#75715e"># Physical path of the persistent storage.</span>
<span style="color:#75715e"># When weblogicDomainStorageType is set to HOST_PATH, this value should be set the to path to the</span>
<span style="color:#75715e"># domain storage on the Kubernetes host.</span>
<span style="color:#75715e"># When weblogicDomainStorageType is set to NFS, then weblogicDomainStorageNFSServer should be set</span>
<span style="color:#75715e"># to the IP address or name of the DNS server, and this value should be set to the exported path</span>
<span style="color:#75715e"># on that server.</span>
<span style="color:#75715e"># Note that the path where the domain is mounted in the WebLogic containers is not affected by this</span>
<span style="color:#75715e"># setting, that is determined when you create your domain.</span>
<span style="color:#75715e"># The following line must be uncomment and customized:</span>
weblogicDomainStoragePath: /scratch/OIGDockerK8S/oimclusterdomainpv
</code></pre></div></li>
<li>
<p>Execute the <code>create-pv-pvc.sh</code> script to create the PV and PVC configuration files:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./create-pv-pvc.sh -i create-pv-pvc-inputs.yaml -o output_oimcluster
</code></pre></div><p>The output will be similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Input parameters being used
export version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;create-weblogic-sample-domain-pv-pvc-inputs-v1&#34;</span>
export baseName<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;oim&#34;</span>
export domainUID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;oimcluster&#34;</span>
export namespace<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;oimcluster&#34;</span>
export weblogicDomainStorageType<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;NFS&#34;</span>
export weblogicDomainStorageNFSServer<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mynfsserver&#34;</span>
export weblogicDomainStoragePath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/scratch/OIGDockerK8S/oimclusterdomainpv&#34;</span>
export weblogicDomainStorageReclaimPolicy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Retain&#34;</span>
export weblogicDomainStorageSize<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;10Gi&#34;</span>

Generating output_oimcluster/pv-pvcs/oimcluster-oim-pv.yaml
Generating output_oimcluster/pv-pvcs/oimcluster-oim-pvc.yaml
The following files were generated:
  output_oimcluster/pv-pvcs/oimcluster-oim-pv.yaml
  output_oimcluster/pv-pvcs/oimcluster-oim-pvc.yaml

Completed
</code></pre></div></li>
<li>
<p>Run the following to show the files are created:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls output_oimcluster/pv-pvcs
create-pv-pvc-inputs.yaml  oimcluster-oim-pvc.yaml  oimcluster-oim-pv.yaml
</code></pre></div></li>
<li>
<p>Run the following <code>kubectl</code> command to create the PV and PVC in the domain namespace:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create -f output_oimcluster/pv-pvcs/oimcluster-oim-pv.yaml -n &lt;domain_namespace&gt;
$ kubectl create -f output_oimcluster/pv-pvcs/oimcluster-oim-pvc.yaml -n &lt;domain_namespace&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create -f output_oimcluster/pv-pvcs/oimcluster-oim-pv.yaml -n oimcluster
$ kubectl create -f output_oimcluster/pv-pvcs/oimcluster-oim-pvc.yaml -n oimcluster
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">persistentvolume/oimcluster-oim-pv created
persistentvolumeclaim/oimcluster-oim-pvc created
</code></pre></div></li>
<li>
<p>Run the following commands to verify the PV and PVC were created successfully:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl describe pv &lt;pv_name&gt; 
$ kubectl describe pvc &lt;pvc_name&gt; -n &lt;domain_namespace&gt;
</code></pre></div><p>For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl describe pv oimcluster-oim-pv 
$ kubectl describe pvc oimcluster-oim-pvc -n oimcluster
</code></pre></div><p>The output will look similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl describe pv oimcluster-oim-pv
   
Name:            oimcluster-oim-pv
Labels:          weblogic.domainUID<span style="color:#f92672">=</span>oimcluster
Annotations:     pv.kubernetes.io/bound-by-controller: yes
Finalizers:      <span style="color:#f92672">[</span>kubernetes.io/pv-protection<span style="color:#f92672">]</span>
StorageClass:    oimcluster-oim-storage-class
Status:          Bound
Claim:           oimcluster/oimcluster-oim-pvc
Reclaim Policy:  Retain
Access Modes:    RWX
VolumeMode:      Filesystem
Capacity:        10Gi
Node Affinity:   &lt;none&gt;
Message:
Source:
    Type:      NFS <span style="color:#f92672">(</span>an NFS mount that lasts the lifetime of a pod<span style="color:#f92672">)</span>
    Server:    mynfsserver
    Path:      /scratch/OIGDockerK8S/oimclusterdomainpv
    ReadOnly:  false
Events:        &lt;none&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl describe pvc oimcluster-oim-pvc -n oimcluster

Name:          oimcluster-oim-pvc
Namespace:     oimcluster
StorageClass:  oimcluster-oim-storage-class
Status:        Bound
Volume:        oimcluster-oim-pv
Labels:        weblogic.domainUID<span style="color:#f92672">=</span>oimcluster
Annotations:   pv.kubernetes.io/bind-completed: yes
               pv.kubernetes.io/bound-by-controller: yes
Finalizers:    <span style="color:#f92672">[</span>kubernetes.io/pvc-protection<span style="color:#f92672">]</span>
Capacity:      10Gi
Access Modes:  RWX
VolumeMode:    Filesystem
Mounted By:    &lt;none&gt;
Events:        &lt;none&gt;
</code></pre></div><p>You are now ready to create the OIG domain as per <a href="../create-oig-domains/">Create OIG Domains</a></p>
</li>
</ol>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/fmw-kubernetes/20.4.1/oig/prerequisites/" title="Prerequisites"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/fmw-kubernetes/20.4.1/oig/create-oig-domains/" title="Create OIG domains" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/fmw-kubernetes/20.4.1/js/clipboard.min.js?1612502690"></script>
    <script src="/fmw-kubernetes/20.4.1/js/perfect-scrollbar.min.js?1612502690"></script>
    <script src="/fmw-kubernetes/20.4.1/js/perfect-scrollbar.jquery.min.js?1612502690"></script>
    <script src="/fmw-kubernetes/20.4.1/js/jquery.sticky.js?1612502690"></script>
    <script src="/fmw-kubernetes/20.4.1/js/featherlight.min.js?1612502690"></script>
    <script src="/fmw-kubernetes/20.4.1/js/highlight.pack.js?1612502690"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/fmw-kubernetes/20.4.1/js/modernizr.custom-3.6.0.js?1612502690"></script>
    <script src="/fmw-kubernetes/20.4.1/js/learn.js?1612502690"></script>
    <script src="/fmw-kubernetes/20.4.1/js/hugo-learn.js?1612502690"></script>

    <link href="/fmw-kubernetes/20.4.1/mermaid/mermaid.css?1612502690" rel="stylesheet" />
    <script src="/fmw-kubernetes/20.4.1/mermaid/mermaid.js?1612502690"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
