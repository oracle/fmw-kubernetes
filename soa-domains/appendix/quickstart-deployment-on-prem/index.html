<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.72.0" />
    <meta name="description" content="Describes how to quickly get an Oracle SOA Suite domain instance running (using the defaults, nothing special) for development and test purposes.">


    <link rel="icon" href="/fmw-kubernetes/images/favicon.png" type="image/png">

    <title>Quick start deployment on-premise :: Oracle Fusion Middleware on Kubernetes</title>

    
    <link href="/fmw-kubernetes/css/nucleus.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/fontawesome-all.min.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hybrid.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/featherlight.min.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/perfect-scrollbar.min.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/auto-complete.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/atom-one-dark-reasonable.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/theme.css?1601733283" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hugo-theme.css?1601733283" rel="stylesheet">
    

    <script src="/fmw-kubernetes/js/jquery-3.3.1.min.js?1601733283"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/fmw-kubernetes/soa-domains/appendix/quickstart-deployment-on-prem/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/fmw-kubernetes/">
  <img src="/fmw-kubernetes//images/oracle_fmw.png" height="50"><br/>
  <b>Oracle Fusion Middleware on Kubernetes </b>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/fmw-kubernetes/js/lunr.min.js?1601733283"></script>
<script type="text/javascript" src="/fmw-kubernetes/js/auto-complete.js?1601733283"></script>
<script type="text/javascript">
    
        var baseurl = "\/fmw-kubernetes\/";
    
</script>
<script type="text/javascript" src="/fmw-kubernetes/js/search.js?1601733283"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
        <li><a  class="padding" href="/fmw-kubernetes/">Home</a></li>
        
          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/" title="Oracle SOA Suite" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/">
          Oracle SOA Suite
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/release-notes/">
        <b>1. </b>Release Notes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/" title="Install Guide" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/">
          <b>2. </b>Install Guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/prerequisites/" title="Requirements and limitations" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/prerequisites/">
          <b>  </b>Requirements and limitations
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/prepare-your-environment/">
          <b>  </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/create-soa-domains/" title="Create Oracle SOA Suite domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/create-soa-domains/">
          <b>  </b>Create Oracle SOA Suite domains
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/" title="Administration Guide" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/adminguide/">
          <b>3.  </b>Administration Guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/" title="Set up a load balancer" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/">
          <b> </b>Set up a load balancer
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/traefik/" title="Traefik" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/traefik/">
        <b>a. </b>Traefik
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/nginx/" title="NGINX" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/nginx/">
        <b>b. </b>NGINX
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/voyager/" title="Voyager" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/voyager/">
        <b>c. </b>Voyager
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/apache/" title="Apache webtier" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/apache/">
        <b>d. </b>Apache webtier
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configuring-custom-ssl-certificates/" title="Configure SSL certificates" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configuring-custom-ssl-certificates/">
        <b> </b>Configure SSL certificates
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/monitoring-soa-domains/" title="Monitor a domain and publish logs" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/monitoring-soa-domains/">
        <b> </b>Monitor a domain and publish logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/enablingt3/" title="Expose the T3/T3S protocol" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/enablingt3/">
        <b> </b>Expose the T3/T3S protocol
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/" title="Deploy composite applications" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/">
          <b>  </b>Deploy composite applications
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/supportjdev/" title="Deploy using JDeveloper" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/supportjdev/">
        <b>a. </b>Deploy using JDeveloper
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/deploy-using-maven-ant/" title="Deploy using Maven and Ant" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/deploy-using-maven-ant/">
        <b>b. </b>Deploy using Maven and Ant
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/jms-asm-migration/" title="Configure Automatic Service Migration" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/jms-asm-migration/">
        <b></b>Configure Automatic Service Migration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/persisting-soa-adapters-customizations/" title="Persist adapter customizations" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/persisting-soa-adapters-customizations/">
        <b></b>Persist adapter customizations
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/" title="Patch and upgrade" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/">
          <b>4. </b>Patch and upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/patch-an-image/" title="Patch an image" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/patch-an-image/">
        <b>a. </b>Patch an image
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-operator-release/" title="Upgrade an operator release" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-operator-release/">
        <b>b. </b>Upgrade an operator release
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-k8s-cluster/" title="Upgrade a Kubernetes cluster" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-k8s-cluster/">
        <b>c. </b>Upgrade a Kubernetes cluster
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/create-or-update-image/" title="Create or update an image" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/create-or-update-image/">
          <b>5. </b>Create or update an image
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/cleanup-domain-setup/" title="Uninstall" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/cleanup-domain-setup/">
        <b>6. </b>Uninstall
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/faq/" title="Frequently Asked Questions" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/faq/">
        <b>7. </b>Frequently Asked Questions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/" title="Appendix" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/appendix/">
          <b>8. </b>Appendix
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/soa-cluster-sizing-info/" title="Domain resource sizing" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/appendix/soa-cluster-sizing-info/">
        <b> </b>Domain resource sizing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/quickstart-deployment-on-prem/" title="Quick start deployment on-premise" class="dd-item active">
        <a href="/fmw-kubernetes/soa-domains/appendix/quickstart-deployment-on-prem/">
        <b> </b>Quick start deployment on-premise
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/docker-k8s-hardening/" title="Security hardening" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/appendix/docker-k8s-hardening/">
        <b> </b>Security hardening
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/" title="Oracle WebCenter Sites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/">
          Oracle WebCenter Sites
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/pre-requisites/" title="Pre-requisites " class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/pre-requisites/">
          <b>1. </b>Pre-requisites 
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/prepare-your-environment/">
          <b>2. </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/" title="Create WebCenter Sites domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/">
          <b>3. </b>Create WebCenter Sites domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/" title="Manage WebCenter Sites domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/">
          <b>4. </b>Manage WebCenter Sites domains
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/" title="a. Using Traefik Loadbalancer" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/">
        a. Using Traefik Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/" title="b. Using Voyager Loadbalancer" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/">
        b. Using Voyager Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-and-wls-server-logs/" title="c. ELK Integration for Logs" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-and-wls-server-logs/">
        c. ELK Integration for Logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/" title="d. Publish logs to Elasticsearch" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/">
        d. Publish logs to Elasticsearch
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/" title="e. Monitor a WebCenter Sites domain" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/">
        e. Monitor a WebCenter Sites domain
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/known-issues/" title="Known Issues in WCSites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/known-issues/">
          <b>5. </b>Known Issues in WCSites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/release-notes/">
        Release Notes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp;</p>
<p><a href="https://github.com/oracle/fmw-kubernetes"><i class="fab fa-github"></i> GitHub repo</a></p>


    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/fmw-kubernetes/'>Oracle Fusion Middleware on Kubernetes</a> > <a href='/fmw-kubernetes/soa-domains/'>Oracle SOA Suite</a> > <a href='/fmw-kubernetes/soa-domains/appendix/'>Appendix</a> > Quick start deployment on-premise
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#set-up-oracle-soa-suite-in-an-on-premise-environment">Set up Oracle SOA Suite in an on-premise environment</a></li>
        <li><a href="#1-prepare-a-virtual-machine-for-the-kubernetes-cluster">1. Prepare a virtual machine for the Kubernetes cluster</a></li>
        <li><a href="#2-set-up-a-single-instance-kubernetes-cluster">2. Set up a single instance Kubernetes cluster</a></li>
        <li><a href="#3-get-scripts-and-images">3. Get scripts and images</a></li>
        <li><a href="#4-install-the-weblogic-kubernetes-operator">4. Install the WebLogic Kubernetes operator</a></li>
        <li><a href="#5-install-the-traefik-ingress-based-load-balancer">5. Install the Traefik (ingress-based) load balancer</a></li>
        <li><a href="#6-create-and-configure-an-oracle-soa-suite-domain">6. Create and configure an Oracle SOA Suite domain</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Quick start deployment on-premise
            </h1>
          

        



<p>Use this Quick Start to create an Oracle SOA Suite domain deployment in a Kubernetes cluster (on-premise environments) with the Oracle WebLogic Server Kubernetes operator. Note that this walkthrough is for demonstration purposes only, not for use in production.
These instructions assume that you are already familiar with Kubernetes. If you need more detailed instructions,
refer to the <a href="/fmw-kubernetes/soa-domains/installguide/">Install Guide</a>.</p>
<h4 id="hardware-requirements">Hardware requirements</h4>
<p>Supported Linux kernel for deploying and running Oracle SOA Suite domains with the operator is Oracle Linux 7 UL6+ and Red Hat Enterprise Linux 7 (UL3+). Refer to the <a href="/fmw-kubernetes/soa-domains/installguide/prerequisites/">prerequisites</a> for more details.</p>
<p>For this exercise the minimum hardware requirement to create a single node Kubernetes cluster and then deploy <code>soaessosb</code> (domain with SOA, OSB, and ESS) domain type with one managed server for SOA and one for OSB Cluster running along with Oracle Database running as a container</p>
<table>
<thead>
<tr>
<th>Hardware</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td>RAM</td>
<td>32GB</td>
</tr>
<tr>
<td>Disk Space</td>
<td>250GB+</td>
</tr>
<tr>
<td>CPU core(s)</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>See <a href="/fmw-kubernetes/soa-domains/appendix/soa-cluster-sizing-info/">here</a> for resourse sizing information for Oracle SOA Suite domains setup on Kubernetes cluster.</p>
<h3 id="set-up-oracle-soa-suite-in-an-on-premise-environment">Set up Oracle SOA Suite in an on-premise environment</h3>
<p>Perform the steps in this topic to create a single instance on-premise Kubernetes cluster and then create an Oracle SOA Suite <code>soaessosb</code> domain type, which deploys a domain with Oracle Service-Oriented Architecture (SOA), Oracle Service Bus (OSB), and Oracle Enterprise Scheduler (ESS).</p>
<ul>
<li><a href="#1-prepare-a-virtual-machine-for-the-kubernetes-cluster">Step 1 - Prepare a virtual machine for the Kubernetes cluster</a></li>
<li><a href="#2-set-up-a-single-instance-kubernetes-cluster">Step 2 - Set up a single instance Kubernetes cluster</a></li>
<li><a href="#3-get-scripts-and-images">Step 3 - Get scripts and images</a></li>
<li><a href="#4-install-the-weblogic-kubernetes-operator">Step 4 - Install the WebLogic Kubernetes Operator</a></li>
<li><a href="#5-install-the-traefik-ingress-based-load-balancer">Step 5 - Install the Traefik (ingress-based) load balancer</a></li>
<li><a href="#6-create-and-configure-an-oracle-soa-suite-domain">Step 6 - Create and configure an Oracle SOA Suite Domain</a></li>
</ul>
<h3 id="1-prepare-a-virtual-machine-for-the-kubernetes-cluster">1. Prepare a virtual machine for the Kubernetes cluster</h3>
<p>For illustration purposes, these instructions are for Oracle Linux 7u6+.  If you are using a different flavor of Linux, you will need to adjust the steps accordingly.</p>

<div class="notices note" ><p>These steps must be run with the <code>root</code> user, unless specified otherwise.
Any time you see <code>YOUR_USERID</code> in a command, you should replace it with your actual <code>userid</code>.</p>
</div>

<h4 id="11-prerequisites">1.1 Prerequisites</h4>
<ol>
<li>
<p>Choose the directories where your Docker and Kubernetes files will be stored.  The Docker directory should be on a disk with a lot of free space (more than 100GB) because it will be used for the Docker file system, which contains all of your images and containers. The Kubernetes directory is used for the <code>/var/lib/kubelet</code> file system and persistent volume storage.</p>
<pre><code>$ export docker_dir=/u01/docker
$ export kubelet_dir=/u01/kubelet
$ mkdir -p $docker_dir $kubelet_dir
$ ln -s kubelet_dir /var/lib/kubelet
</code></pre></li>
<li>
<p>Verify that IPv4 forwarding is enabled on your host.</p>
<p><strong>Note</strong>: Replace eth0 with the ethernet interface name of your compute resource if it is different.</p>
<pre><code>$ /sbin/sysctl -a 2&gt;&amp;1|grep -s 'net.ipv4.conf.docker0.forwarding'
$ /sbin/sysctl -a 2&gt;&amp;1|grep -s 'net.ipv4.conf.eth0.forwarding'
$ /sbin/sysctl -a 2&gt;&amp;1|grep -s 'net.ipv4.conf.lo.forwarding'
$ /sbin/sysctl -a 2&gt;&amp;1|grep -s 'net.ipv4.ip_nonlocal_bind'
</code></pre><p>For example: Verify that all are set to 1</p>
<pre><code>$ net.ipv4.conf.docker0.forwarding = 1
$ net.ipv4.conf.eth0.forwarding = 1
$ net.ipv4.conf.lo.forwarding = 1
$ net.ipv4.ip_nonlocal_bind = 1
</code></pre><p>Solution: Set all values to 1 immediately with the following commands:</p>
<pre><code>$ /sbin/sysctl net.ipv4.conf.docker0.forwarding=1
$ /sbin/sysctl net.ipv4.conf.eth0.forwarding=1
$ /sbin/sysctl net.ipv4.conf.lo.forwarding=1
$ /sbin/sysctl net.ipv4.ip_nonlocal_bind=1
</code></pre><p><strong>To preserve the settings post-reboot</strong>: Update the above values to 1 in files in /usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/</p>
</li>
<li>
<p>Verify the iptables rule for forwarding.</p>
<p>Kubernetes uses iptables to handle many networking and port forwarding rules. A standard Docker installation may create a firewall rule that prevents forwarding.</p>
<p>Verify if the iptables rule to accept forwarding traffic is set:</p>
<pre><code>$ /sbin/iptables -L -n | awk '/Chain FORWARD / {print $4}' | tr -d &quot;)&quot;
</code></pre><p>If the output is &ldquo;DROP&rdquo;, then run the following command:</p>
<pre><code>$ /sbin/iptables -P FORWARD ACCEPT
</code></pre><p>Verify if the iptables rule is set properly to &ldquo;ACCEPT&rdquo;:</p>
<pre><code>$ /sbin/iptables -L -n | awk '/Chain FORWARD / {print $4}' | tr -d &quot;)&quot;
</code></pre></li>
<li>
<p>Disable and stop firewalld:</p>
<pre><code>$ systemctl disable firewalld
$ systemctl stop firewalld
</code></pre></li>
</ol>
<h4 id="12-install-and-configure-docker">1.2 Install and configure Docker</h4>
<blockquote>
<p>Note : If you have already installed Docker with version 18.03+ and configured Docker daemon root to sufficient disk space along with proxy settings, continue to <a href="#13-install-and-configure-kubernetes">Install and configure Kubernetes</a></p>
</blockquote>
<ol>
<li>
<p>Make sure that you have the right operating system version:</p>
<pre><code>$ uname -a
$ more /etc/oracle-release
</code></pre><p>For example:</p>
<pre><code>Linux xxxxxxx 4.1.12-124.27.1.el7uek.x86_64 #2 SMP Mon May 13 08:56:17 PDT 2019 x86_64 x86_64 x86_64 GNU/Linux
Oracle Linux Server release 7.6
</code></pre></li>
<li>
<p>Install the latest docker-engine and start the Docker service:</p>
<pre><code>$ yum-config-manager --enable ol7_addons
$ yum install docker-engine

$ systemctl enable docker
$ systemctl start docker
</code></pre></li>
<li>
<p>Add your userid to the Docker group. This will allow you to run the Docker commands without root access:</p>
<pre><code>$ /sbin/usermod -a -G docker &lt;YOUR_USERID&gt;
</code></pre></li>
<li>
<p>Check your Docker version. It must be at least 18.03.</p>
<pre><code>$ docker version
</code></pre><p>For example:</p>
<pre><code>Client: Docker Engine - Community
 Version:           19.03.1-ol
 API version:       1.40
 Go version:        go1.12.5
 Git commit:        ead9442
 Built:             Wed Sep 11 06:40:28 2019
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
 Version:          19.03.1-ol
 API version:      1.40 (minimum version 1.12)
 Go version:       go1.12.5
 Git commit:       ead9442
 Built:            Wed Sep 11 06:38:43 2019
 OS/Arch:          linux/amd64
 Experimental:     false
 Default Registry: docker.io
containerd:
 Version:          v1.2.0-rc.0-108-gc444666
 GitCommit:        c4446665cb9c30056f4998ed953e6d4ff22c7c39
runc:
 Version:          1.0.0-rc5+dev
 GitCommit:        4bb1fe4ace1a32d3676bb98f5d3b6a4e32bf6c58
docker-init:
 Version:          0.18.0
 GitCommit:        fec3683
</code></pre></li>
<li>
<p>Update the Docker engine configuration:</p>
<pre><code>$ mkdir -p /etc/docker

$ cat &lt;&lt;EOF &gt; /etc/docker/daemon.json
{
   &quot;group&quot;: &quot;docker&quot;,
   &quot;data-root&quot;: &quot;/u01/docker&quot;
}
EOF
</code></pre></li>
<li>
<p>Configure proxy settings if you are behind an HTTP proxy.
On some hosts /etc/systemd/system/docker.service.d may not be available. Create this directory if it is not available.</p>
<pre><code> ### Create the drop-in file /etc/systemd/system/docker.service.d/http-proxy.conf that contains proxy details:     
 $ cat &lt;&lt;EOF &gt; /etc/systemd/system/docker.service.d/http-proxy.conf
 [Service]
 Environment=&quot;HTTP_PROXY=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT&quot;
 Environment=&quot;HTTPS_PROXY=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT&quot;
 Environment=&quot;NO_PROXY=localhost,127.0.0.0/8,ADD-YOUR-INTERNAL-NO-PROXY-LIST,/var/run/docker.sock&quot;
 EOF
</code></pre></li>
<li>
<p>Restart the Docker daemon to load the latest changes:</p>
<pre><code>$ systemctl daemon-reload    
$ systemctl restart docker
</code></pre></li>
<li>
<p>Verify that the proxy is configured with Docker:</p>
<pre><code>$ docker info|grep -i proxy
</code></pre><p>For example:</p>
<pre><code>HTTP Proxy: http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
HTTPS Proxy: http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
No Proxy: localhost,127.0.0.0/8,ADD-YOUR-INTERNAL-NO-PROXY-LIST,/var/run/docker.sock
</code></pre></li>
<li>
<p>Verify Docker installation:</p>
<pre><code>$ docker run hello-world     
</code></pre><p>For example:</p>
<pre><code>Hello from Docker!
This message shows that your installation appears to be working correctly.
To generate this message, Docker took the following steps:
1. The Docker client contacted the Docker daemon.
2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
   (amd64)
3. The Docker daemon created a new container from that image which runs the
   executable that produces the output you are currently reading.
4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal.
To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash
Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/
For more examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre></li>
</ol>
<h4 id="13-install-and-configure-kubernetes">1.3 Install and configure Kubernetes</h4>
<ol>
<li>
<p>Add the external Kubernetes repository:</p>
<pre><code>$ cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\$basearch
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
exclude=kubelet kubeadm kubectl
EOF

</code></pre></li>
<li>
<p>Set SELinux in permissive mode (effectively disabling it):</p>
<pre><code>$ export PATH=/sbin:$PATH
$ setenforce 0
$ sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config
</code></pre></li>
<li>
<p>Export proxy and install <code>kubeadm</code>, <code>kubelet</code>, and <code>kubectl</code>:</p>
<pre><code>### Get the nslookup IP address of the master node to use with apiserver-advertise-address during setting up Kubernetes master
### as the host may have different internal ip (hostname -i) and nslookup $HOSTNAME
$ ip_addr=`nslookup $(hostname -f) | grep -m2 Address | tail -n1| awk -F: '{print $2}'| tr -d &quot; &quot;`
$ echo $ip_addr

### Set the proxies
$ export NO_PROXY=localhost,127.0.0.0/8,ADD-YOUR-INTERNAL-NO-PROXY-LIST,/var/run/docker.sock,$ip_addr
$ export no_proxy=localhost,127.0.0.0/8,ADD-YOUR-INTERNAL-NO-PROXY-LIST,/var/run/docker.sock,$ip_addr
$ export http_proxy=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
$ export https_proxy=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
$ export HTTPS_PROXY=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
$ export HTTP_PROXY=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT

### install kubernetes 1.18.4-1
$ VERSION=1.18.4-1
$ yum install -y kubelet-$VERSION kubeadm-$VERSION kubectl-$VERSION --disableexcludes=kubernetes

### enable kubelet service so that it auto-restart on reboot
$ systemctl enable --now kubelet
</code></pre></li>
<li>
<p>Ensure <code>net.bridge.bridge-nf-call-iptables</code> is set to 1 in your <code>sysctl</code> to avoid traffic routing issues:</p>
<pre><code>$ cat &lt;&lt;EOF &gt;  /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF
$ sysctl --system
</code></pre></li>
<li>
<p>Disable swap check:</p>
<pre><code>$ sed -i 's/KUBELET_EXTRA_ARGS=/KUBELET_EXTRA_ARGS=&quot;--fail-swap-on=false&quot;/' /etc/sysconfig/kubelet
$ cat /etc/sysconfig/kubelet
### Reload and restart kubelet
$ systemctl daemon-reload
$ systemctl restart kubelet    
</code></pre></li>
</ol>
<h4 id="14-set-up-helm">1.4 Set up Helm</h4>
<ol>
<li>
<p>Install Helm v3.x.</p>
<p>a. Download Helm from <a href="https://github.com/helm/helm/releases">https://github.com/helm/helm/releases</a>. Example to download Helm v3.2.4:</p>
<pre><code>$ wget https://get.helm.sh/helm-v3.2.4-linux-amd64.tar.gz
</code></pre><p>b. Unpack <code>tar.gz</code>:</p>
<pre><code>$ tar -zxvf helm-v3.2.4-linux-amd64.tar.gz
</code></pre><p>c. Find the Helm binary in the unpacked directory, and move it to its desired destination:</p>
<pre><code>$ mv linux-amd64/helm /usr/bin/helm
</code></pre></li>
<li>
<p>Run <code>helm version</code> to verify its installation:</p>
<pre><code>$ helm version
  version.BuildInfo{Version:&quot;v3.2.4&quot;, GitCommit:&quot;0ad800ef43d3b826f31a5ad8dfbb4fe05d143688&quot;, GitTreeState:&quot;clean&quot;, GoVersion:&quot;go1.13.12&quot;}
</code></pre></li>
</ol>
<h3 id="2-set-up-a-single-instance-kubernetes-cluster">2. Set up a single instance Kubernetes cluster</h3>
<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>These steps must be run with the <code>root</code> user, unless specified otherwise!</li>
<li>If you choose to use a different cidr block (that is, other than <code>10.244.0.0/16</code> for the <code>--pod-network-cidr=</code> in the <code>kubeadm init</code> command), then also update <code>NO_PROXY</code> and <code>no_proxy</code> with the appropriate value.
<ul>
<li>Also make sure to update <code>kube-flannel.yaml</code> with the new value before deploying.</li>
</ul>
</li>
<li>Replace the following with appropriate values:
<ul>
<li><code>ADD-YOUR-INTERNAL-NO-PROXY-LIST</code></li>
<li><code>REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT</code></li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="21-set-up-the-master-node">2.1 Set up the master node</h4>
<ol>
<li>
<p>Create a shell script that sets up the necessary environment variables. You can append this to the user’s <code>.bashrc</code> so that it will run at login. You must also configure your proxy settings here if you are behind an HTTP proxy:</p>
<pre><code>## grab my IP address to pass into  kubeadm init, and to add to no_proxy vars
ip_addr=`nslookup $(hostname -f) | grep -m2 Address | tail -n1| awk -F: '{print $2}'| tr -d &quot; &quot;`
export pod_network_cidr=&quot;10.244.0.0/16&quot;
export service_cidr=&quot;10.96.0.0/12&quot;
export PATH=$PATH:/sbin:/usr/sbin

### Set the proxies
export NO_PROXY=localhost,127.0.0.0/8,ADD-YOUR-INTERNAL-NO-PROXY-LIST,/var/run/docker.sock,$ip_addr,$pod_network_cidr,$service_cidr
export no_proxy=localhost,127.0.0.0/8,ADD-YOUR-INTERNAL-NO-PROXY-LIST,/var/run/docker.sock,$ip_addr,$pod_network_cidr,$service_cidr
export http_proxy=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
export https_proxy=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
export HTTPS_PROXY=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
export HTTP_PROXY=http://REPLACE-WITH-YOUR-COMPANY-PROXY-HOST:PORT
</code></pre></li>
<li>
<p>Source the script to set up your environment variables:</p>
<pre><code>$ . ~/.bashrc
</code></pre></li>
<li>
<p>To implement command completion, add the following to the script:</p>
<pre><code>$ [ -f /usr/share/bash-completion/bash_completion ] &amp;&amp; . /usr/share/bash-completion/bash_completion
$ source &lt;(kubectl completion bash)
</code></pre></li>
<li>
<p>Run <code>kubeadm init</code> to create the master node:</p>
<pre><code>$ kubeadm init \
  --pod-network-cidr=$pod_network_cidr \
  --apiserver-advertise-address=$ip_addr \
  --ignore-preflight-errors=Swap  &gt; /tmp/kubeadm-init.out 2&gt;&amp;1
</code></pre></li>
<li>
<p>Log in to the terminal with <code>YOUR_USERID:YOUR_GROUP</code>. Then set up the <code>~/.bashrc</code> similar to steps 1 to 3 with <code>YOUR_USERID:YOUR_GROUP</code>.</p>
<blockquote>
<p>Note that from now on we will be using <code>YOUR_USERID:YOUR_GROUP</code> to execute any <code>kubectl</code> commands and not <code>root</code>.</p>
</blockquote>
</li>
<li>
<p>Set up <code>YOUR_USERID:YOUR_GROUP</code> to access the Kubernetes cluster:</p>
<pre><code>$ mkdir -p $HOME/.kube
$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
$ sudo chown $(id -u):$(id -g) $HOME/.kube/config
</code></pre></li>
<li>
<p>Verify that <code>YOUR_USERID:YOUR_GROUP</code> is set up to access the Kubernetes cluster using the <code>kubectl</code> command:</p>
<pre><code>$ kubectl get nodes
</code></pre><blockquote>
<p>Note: At this step, the node is not in ready state as we have not yet installed the pod network add-on. After the next step, the node will show status as Ready.</p>
</blockquote>
</li>
<li>
<p>Install a pod network add-on (<code>flannel</code>) so that your pods can communicate with each other.</p>
<blockquote>
<p>Note: If you are using a different cidr block than <code>10.244.0.0/16</code>, then download and update <code>kube-flannel.yml</code> with the correct cidr address before deploying into the cluster:</p>
</blockquote>
<pre><code>$ kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/v0.12.0/Documentation/kube-flannel.yml
</code></pre></li>
<li>
<p>Verify that the master node is in Ready status:</p>
<pre><code>$ kubectl get nodes
</code></pre><p>For example:</p>
<pre><code>NAME        STATUS   ROLES    AGE     VERSION
mymasternode Ready    master   8m26s   v1.18.4
</code></pre><p>or:</p>
<pre><code>$ kubectl get pods -n kube-system
</code></pre><p>For example:</p>
<pre><code>NAME                                    READY       STATUS      RESTARTS    AGE
pod/coredns-86c58d9df4-58p9f                1/1         Running         0       3m59s
pod/coredns-86c58d9df4-mzrr5                1/1         Running         0       3m59s
pod/etcd-mymasternode                       1/1         Running         0       3m4s
pod/kube-apiserver-node                     1/1         Running         0       3m21s
pod/kube-controller-manager-mymasternode    1/1         Running         0       3m25s
pod/kube-flannel-ds-amd64-6npx4             1/1         Running         0       49s
pod/kube-proxy-4vsgm                        1/1         Running         0       3m59s
pod/kube-scheduler-mymasternode             1/1         Running         0       2m58s
</code></pre></li>
<li>
<p>To schedule pods on the master node, <code>taint</code> the node:</p>
<pre><code>$ kubectl taint nodes --all node-role.kubernetes.io/master-
</code></pre></li>
</ol>
<p>Congratulations! Your Kubernetes cluster environment is ready to deploy your Oracle SOA Suite domain.</p>
<p>For additional references on Kubernetes cluster setup, check the <a href="https://oracle.github.io/weblogic-kubernetes-operator/userguide/overview/k8s-setup/">cheat sheet</a>.</p>
<h3 id="3-get-scripts-and-images">3. Get scripts and images</h3>
<h4 id="31-set-up-the-code-repository-to-deploy-oracle-soa-suite-domains">3.1 Set up the code repository to deploy Oracle SOA Suite domains</h4>
<p>Follow <a href="/fmw-kubernetes/soa-domains/installguide/prepare-your-environment/#set-up-the-code-repository-to-deploy-oracle-soa-suite-domains">these steps</a> to set up the source code repository required to deploy Oracle SOA Suite domains.</p>
<h4 id="32-get-required-docker-images-and-add-them-to-your-local-registry">3.2 Get required Docker images and add them to your local registry</h4>
<ol>
<li>
<p>If you don&rsquo;t already have one, obtain a Docker store account, log in to the Docker store, and accept the license agreement for the <a href="https://hub.docker.com/_/oracle-weblogic-server-12c">WebLogic Server image</a>.</p>
</li>
<li>
<p>Log in to the Docker store from your Docker client:</p>
<pre><code>$ docker login
</code></pre></li>
<li>
<p>Pull the operator image:</p>
<pre><code>$ docker pull oracle/weblogic-kubernetes-operator:3.0.1
</code></pre></li>
<li>
<p>Obtain the Oracle Database image and Oracle SOA Suite Docker image from the <a href="https://container-registry.oracle.com">Oracle Container Registry</a>:</p>
<p>a. For first time users, to pull an image from the Oracle Container Registry, navigate to <a href="https://container-registry.oracle.com">https://container-registry.oracle.com</a> and log in using the Oracle Single Sign-On (SSO) authentication service. If you do not already have SSO credentials, click the Sign In link at the top of the page to create them.</p>
<p>Use the web interface to accept the Oracle Standard Terms and Restrictions for the Oracle software images that you intend to deploy. Your acceptance of these terms are stored in a database that links the software images to your Oracle Single Sign-On login credentials.</p>
<p>To obtain the image, log in to the Oracle Container Registry:</p>
<pre><code>$ docker login container-registry.oracle.com
</code></pre><p>b. Find and then pull the Oracle Database image for 12.2.0.1:</p>
<pre><code>$ docker pull container-registry.oracle.com/database/enterprise:12.2.0.1-slim
</code></pre><p>c. Find and then pull the prebuilt Oracle SOA Suite image 12.2.1.4 install image:</p>
<pre><code>$ docker pull container-registry.oracle.com/middleware/soasuite:12.2.1.4-dev
</code></pre><blockquote>
<p>Note: This image does not contain any Oracle SOA Suite product patches and can only be used for test and development purposes.</p>
</blockquote>
</li>
</ol>
<h3 id="4-install-the-weblogic-kubernetes-operator">4. Install the WebLogic Kubernetes operator</h3>
<h4 id="41-prepare-for-the-weblogic-kubernetes-operator">4.1 Prepare for the WebLogic Kubernetes operator.</h4>
<ol>
<li>
<p>Create a namespace <code>opns</code> for the operator <code>WORKDIR</code> for the Oracle SOA Suite operator code:</p>
<pre><code>$ kubectl create namespace opns
</code></pre></li>
<li>
<p>Create a service account <code>op-sa</code> for the operator in the operator’s namespace:</p>
<pre><code>$ kubectl create serviceaccount -n opns op-sa
</code></pre></li>
</ol>
<h4 id="42-install-the-weblogic-kubernetes-operator">4.2 Install the WebLogic Kubernetes operator</h4>
<p>Use Helm to install and start the operator from the directory you just cloned:</p>
<pre><code>   $ cd ${WORKDIR}/weblogic-kubernetes-operator
   $ helm install weblogic-kubernetes-operator kubernetes/charts/weblogic-operator \
   --namespace opns \
   --set image=oracle/weblogic-kubernetes-operator:3.0.1 \
   --set serviceAccount=op-sa \
   --set &quot;domainNamespaces={}&quot; \
   --wait
</code></pre><h4 id="43-verify-the-weblogic-kubernetes-operator">4.3 Verify the WebLogic Kubernetes operator</h4>
<ol>
<li>
<p>Verify that the operator’s pod is running by listing the pods in the operator’s namespace. You should see one for the operator:</p>
<pre><code>$ kubectl get pods -n opns
</code></pre></li>
<li>
<p>Verify that the operator is up and running by viewing the operator pod&rsquo;s logs:</p>
<pre><code>$ kubectl logs -n opns -c weblogic-operator deployments/weblogic-operator
</code></pre></li>
</ol>
<p>The WebLogic Kubernetes operator v3.0.1 has been installed. Continue with the load balancer and Oracle SOA Suite domain setup.</p>
<h3 id="5-install-the-traefik-ingress-based-load-balancer">5. Install the Traefik (ingress-based) load balancer</h3>
<p>The Oracle WebLogic Server Kubernetes operator supports three load balancers: Traefik, Voyager, and Apache. Samples are provided in the documentation.</p>
<p>This Quick Start demonstrates how to install the Traefik ingress controller to provide load balancing for an Oracle SOA Suite domain.</p>
<ol>
<li>
<p>Create a namespace for Traefik:</p>
<pre><code>$ kubectl create namespace traefik
</code></pre></li>
<li>
<p>Set up Helm for 3rd party services:</p>
<pre><code>$ helm repo add traefik https://containous.github.io/traefik-helm-chart
</code></pre></li>
<li>
<p>Install the Traefik operator in the <code>traefik</code> namespace with the provided sample values:</p>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator
$ helm install traefik traefik/traefik \
 --namespace traefik \
 --values kubernetes/samples/scripts/charts/traefik/values.yaml \
 --set &quot;kubernetes.namespaces={traefik}&quot; \
 --set &quot;service.type=NodePort&quot; \
 --wait
</code></pre></li>
</ol>
<h3 id="6-create-and-configure-an-oracle-soa-suite-domain">6. Create and configure an Oracle SOA Suite domain</h3>
<h4 id="61-prepare-for-an-oracle-soa-suite-domain">6.1 Prepare for an Oracle SOA Suite domain</h4>
<ol>
<li>
<p>Create a namespace that can host Oracle SOA Suite domains:</p>
<pre><code>$ kubectl create namespace soans
</code></pre></li>
<li>
<p>Use Helm to configure the operator to manage Oracle SOA Suite domains in this namespace:</p>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator
$ helm upgrade weblogic-kubernetes-operator kubernetes/charts/weblogic-operator \
   --reuse-values \
   --namespace opns \
   --set &quot;domainNamespaces={soans}&quot; \
   --wait
</code></pre></li>
<li>
<p>Create Kubernetes secrets.</p>
<p>a. Create a Kubernetes secret for the domain in the same Kubernetes namespace as the domain. In this example, the username is <code>weblogic</code>, the password in <code>Welcome1</code>, and the namespace is <code>soans</code>:</p>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-weblogic-domain-credentials
$ ./create-weblogic-credentials.sh \
     -u weblogic \
     -p Welcome1 \
     -n soans    \
     -d soainfra \
     -s soainfra-domain-credentials
</code></pre><p>b. Create a Kubernetes secret for the RCU in the same Kubernetes namespace as the domain:</p>
<ul>
<li>Schema user          : SOA1</li>
<li>Schema password      : Oradoc_db1</li>
<li>DB sys user password : Oradoc_db1</li>
<li>Domain name          : soainfra</li>
<li>Domain Namespace     : soans</li>
<li>Secret name          : soainfra-rcu-credentials</li>
</ul>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-rcu-credentials
$ ./create-rcu-credentials.sh \
       -u SOA1 \
       -p Oradoc_db1 \
       -a sys \
       -q Oradoc_db1 \
       -d soainfra \
       -n soans \
       -s soainfra-rcu-credentials
</code></pre></li>
<li>
<p>Create the Kubernetes persistence volume and persistence volume claim.</p>
<p>a. Create the Oracle SOA Suite domain home directory.
Determine if a user already exists on your host system with <code>uid:gid</code> of <code>1000</code>:</p>
<pre><code>$ sudo getent passwd 1000
</code></pre><p>If this command returns a username (which is the first field), you can skip the following <code>useradd</code> command. If not, create the oracle user with <code>useradd</code>:</p>
<pre><code>$ sudo useradd -u 1000 -g 1000 oracle
</code></pre><p>Create the directory that will be used for the Oracle SOA Suite domain home:</p>
<pre><code>$ sudo mkdir /scratch/k8s_dir
$ sudo chown -R 1000:1000 /scratch/k8s_dir
</code></pre><p>b. Update <code>create-pv-pvc-inputs.yaml</code> with the following values:</p>
<ul>
<li>baseName: domain</li>
<li>domainUID: soainfra</li>
<li>namespace: soans</li>
<li>weblogicDomainStoragePath: /scratch/k8s_dir</li>
</ul>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-weblogic-domain-pv-pvc
$ cp create-pv-pvc-inputs.yaml create-pv-pvc-inputs.yaml.orig
$ sed -i -e &quot;s:baseName\: weblogic-sample:baseName\: domain:g&quot; create-pv-pvc-inputs.yaml
$ sed -i -e &quot;s:domainUID\::domainUID\: soainfra:g&quot; create-pv-pvc-inputs.yaml
$ sed -i -e &quot;s:namespace\: default:namespace\: soans:g&quot; create-pv-pvc-inputs.yaml
$ sed -i -e &quot;s:#weblogicDomainStoragePath\: /scratch/k8s_dir:weblogicDomainStoragePath\: /scratch/k8s_dir:g&quot; create-pv-pvc-inputs.yaml
</code></pre><p>c. Run the <code>create-pv-pvc.sh</code> script to create the PV and PVC configuration files:</p>
<pre><code>$ ./create-pv-pvc.sh -i create-pv-pvc-inputs.yaml -o output
</code></pre><p>d. Create the PV and PVC using the configuration files created in the previous step:</p>
<pre><code>$ kubectl create -f  output/pv-pvcs/soainfra-domain-pv.yaml
$ kubectl create -f  output/pv-pvcs/soainfra-domain-pvc.yaml
</code></pre></li>
<li>
<p>Install and configure the database for the Oracle SOA Suite domain.</p>
<p>This step is required only when a standalone database is not already set up and you want to use the database in a container.</p>

<div class="notices warning" ><p>The Oracle Database Docker images are supported only for non-production use. For more details, see My Oracle Support note: Oracle Support for Database Running on Docker (Doc ID 2216342.1). For production, it is suggested to use a standalone database. This example provides steps to create the database in a container.</p>
</div>

<p>a. Create a database in a container:</p>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-oracle-db-service
$ ./start-db-service.sh -i  container-registry.oracle.com/database/enterprise:12.2.0.1-slim -p none
</code></pre><p>Once the database is successfully created, you can use the database connection string <code>oracle-db.default.svc.cluster.local:1521/devpdb.k8s</code> as an <code>rcuDatabaseURL</code> parameter in the <code>create-domain-inputs.yaml</code> file.</p>
<p>b. Create Oracle SOA Suite schemas for the domain type (for example, <code>soaessosb</code>).</p>
<p>To install the Oracle SOA Suite schemas, run the <code>create-rcu-schema.sh</code> script with the following inputs:</p>
<ul>
<li>-s &lt;RCU PREFIX&gt;   Here: SOA1</li>
<li>-t &lt;SOA domain type&gt;  Here: soaessosb</li>
<li>-i &lt;SOASuite image&gt;   Here: container-registry.oracle.com/middleware/soasuite:12.2.1.4-dev</li>
</ul>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-rcu-schema
$ ./create-rcu-schema.sh \
   -s SOA1 \
   -t soaessosb \
   -i container-registry.oracle.com/middleware/soasuite:12.2.1.4-dev \
   -q Oradoc_db1 \
   -r Oradoc_db1
</code></pre></li>
</ol>
<p>Now the environment is ready to start the Oracle SOA Suite domain creation.</p>
<h4 id="62-create-an-oracle-soa-suite-domain">6.2 Create an Oracle SOA Suite domain</h4>
<ol>
<li>
<p>The sample scripts for Oracle SOA Suite domain deployment are available at <code>&lt;weblogic-kubernetes-operator-project&gt;/kubernetes/samples/scripts/create-soa-domain</code>. You must edit <code>create-domain-inputs.yaml</code> (or a copy of it) to provide the details for your domain.</p>
<p>Update <code>create-domain-inputs.yaml</code> with the following values for domain creation:</p>
<ul>
<li>domainType: soaessosb</li>
<li>initialManagedServerReplicas: 1</li>
</ul>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-soa-domain/domain-home-on-pv/

$ cp create-domain-inputs.yaml create-domain-inputs.yaml.orig

$ sed -i -e &quot;s:domainType\: soa:domainType\: soaessosb:g&quot; create-domain-inputs.yaml
$ sed -i -e &quot;s:initialManagedServerReplicas\: 2:initialManagedServerReplicas\: 1:g&quot; create-domain-inputs.yaml
$ sed -i -e &quot;s:image\: soasuite\:12.2.1.4:image\: container-registry.oracle.com/middleware/soasuite\:12.2.1.4-dev:g&quot; create-domain-inputs.yaml
</code></pre></li>
<li>
<p>Run the <code>create-domain.sh</code> script to create a domain:</p>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-soa-domain/domain-home-on-pv/
$ ./create-domain.sh -i create-domain-inputs.yaml -o output
</code></pre></li>
<li>
<p>Create a Kubernetes domain object:</p>
<p>Once the create-domain.sh is successful, it generates the <code>output/weblogic-domains/soainfra/domain.yaml</code> that you can use to create the Kubernetes resource domain, which starts the domain and servers:</p>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator/kubernetes/samples/scripts/create-soa-domain/domain-home-on-pv
$ kubectl create -f output/weblogic-domains/soainfra/domain.yaml
</code></pre></li>
<li>
<p>Verify that the Kubernetes domain object named <code>soainfra</code> is created:</p>
<pre><code>$ kubectl get domain -n soans
NAME       AGE
soainfra   3m18s
</code></pre></li>
<li>
<p>Once you create the domain, <em>introspect pod</em> is created. This inspects the domain home and then starts the <code>soainfra-adminserver</code> pod. Once the <code>soainfra-adminserver</code> pod starts successfully, then the Managed Server pods are started in parallel.
Watch the <code>soans</code> namespace for the status of domain creation:</p>
<pre><code>$ kubectl get pods -n soans -w
</code></pre></li>
<li>
<p>Verify that the Oracle SOA Suite domain server pods and services are created and in Ready state:</p>
<pre><code>$ kubectl get all -n soans
</code></pre></li>
</ol>
<h4 id="63-configure-traefik-to-access-in-oracle-soa-suite-domain-services">6.3 Configure Traefik to access in Oracle SOA Suite domain services</h4>
<ol>
<li>
<p>Configure Traefik to manage ingresses created in the Oracle SOA Suite domain namespace (<code>soans</code>):</p>
<pre><code>$ helm upgrade traefik traefik/traefik \
  --reuse-values \
  --namespace traefik \
  --set &quot;kubernetes.namespaces={traefik,soans}&quot; \
  --wait
</code></pre></li>
<li>
<p>Create an ingress for the domain in the domain namespace by using the sample Helm chart:</p>
<pre><code>$ cd ${WORKDIR}/weblogic-kubernetes-operator
$ helm install soa-traefik-ingress  kubernetes/samples/charts/ingress-per-domain \
--namespace soans \
--values kubernetes/samples/charts/ingress-per-domain/values.yaml \
--set &quot;traefik.hostname=$(hostname -f)&quot; \
--set domainType=soaessosb
</code></pre></li>
<li>
<p>Verify the created ingress per domain details:</p>
<pre><code>$ kubectl describe ingress soainfra-traefik -n soans
</code></pre></li>
</ol>
<h4 id="64-verify-that-you-can-access-the-oracle-soa-suite-domain-url">6.4 Verify that you can access the Oracle SOA Suite domain URL</h4>
<ol>
<li>
<p>Get the <code>LOADBALANCER_HOSTNAME</code> for your environment:</p>
<pre><code>export LOADBALANCER_HOSTNAME=$(hostname -f)
</code></pre></li>
<li>
<p>The following URLs are available for Oracle SOA Suite domains of domain type <code>soaessosb</code>:</p>
<p>Credentials:
<em>username</em>: <code>weblogic</code>
<em>password</em>: <code>Welcome1</code></p>
<pre><code>http://${LOADBALANCER_HOSTNAME}:30305/console
http://${LOADBALANCER_HOSTNAME}:30305/em
http://${LOADBALANCER_HOSTNAME}:30305/servicebus
http://${LOADBALANCER_HOSTNAME}:30305/soa-infra
http://${LOADBALANCER_HOSTNAME}:30305/soa/composer
http://${LOADBALANCER_HOSTNAME}:30305/integration/worklistapp
http://${LOADBALANCER_HOSTNAME}:30305/ess
http://${LOADBALANCER_HOSTNAME}:30305/EssHealthCheck
</code></pre></li>
</ol>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/fmw-kubernetes/soa-domains/appendix/soa-cluster-sizing-info/" title="Domain resource sizing"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/fmw-kubernetes/soa-domains/appendix/docker-k8s-hardening/" title="Security hardening" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/fmw-kubernetes/js/clipboard.min.js?1601733283"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.min.js?1601733283"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.jquery.min.js?1601733283"></script>
    <script src="/fmw-kubernetes/js/jquery.sticky.js?1601733283"></script>
    <script src="/fmw-kubernetes/js/featherlight.min.js?1601733283"></script>
    <script src="/fmw-kubernetes/js/highlight.pack.js?1601733283"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/fmw-kubernetes/js/modernizr.custom-3.6.0.js?1601733283"></script>
    <script src="/fmw-kubernetes/js/learn.js?1601733283"></script>
    <script src="/fmw-kubernetes/js/hugo-learn.js?1601733283"></script>

    <link href="/fmw-kubernetes/mermaid/mermaid.css?1601733283" rel="stylesheet" />
    <script src="/fmw-kubernetes/mermaid/mermaid.js?1601733283"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

