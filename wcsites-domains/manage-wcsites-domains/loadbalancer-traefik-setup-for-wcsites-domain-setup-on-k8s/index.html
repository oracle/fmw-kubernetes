<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.65.3" />
    <meta name="description" content="Steps to set up Traefik as a loadbalancer for the WebCenter Sites domain.">


    <link rel="icon" href="/fmw-kubernetes/images/favicon.png" type="image/png">

    <title>a. Using Traefik Loadbalancer :: Oracle Fusion Middleware on Kubernetes</title>

    
    <link href="/fmw-kubernetes/css/nucleus.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/fontawesome-all.min.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hybrid.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/featherlight.min.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/perfect-scrollbar.min.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/auto-complete.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/atom-one-dark-reasonable.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/theme.css?1584586669" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hugo-theme.css?1584586669" rel="stylesheet">
    

    <script src="/fmw-kubernetes/js/jquery-3.3.1.min.js?1584586669"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/fmw-kubernetes/">
  <img src="/fmw-kubernetes//images/fmw_12c_12_2_1_4_0-logo.png" height="100"><br/>
  <b>Oracle Fusion Middleware on Kubernetes </b>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/fmw-kubernetes/js/lunr.min.js?1584586669"></script>
<script type="text/javascript" src="/fmw-kubernetes/js/auto-complete.js?1584586669"></script>
<script type="text/javascript">
    
        var baseurl = "\/fmw-kubernetes\/";
    
</script>
<script type="text/javascript" src="/fmw-kubernetes/js/search.js?1584586669"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
        <li><a  class="padding" href="/fmw-kubernetes/">Home</a></li>
        
          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/" title="Oracle WebCenter Sites" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/">
          Oracle WebCenter Sites
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/pre-requisites/" title="Pre-requisites " class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/pre-requisites/">
          <b>1. </b>Pre-requisites 
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/prepare-your-environment/">
          <b>2. </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/" title="Create WebCenter Sites domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/">
          <b>3. </b>Create WebCenter Sites domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/" title="Manage WebCenter Sites domains" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/">
          <b>4. </b>Manage WebCenter Sites domains
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/" title="a. Using Traefik Loadbalancer" class="dd-item active">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/">
        a. Using Traefik Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/" title="b. Using Voyager Loadbalancer" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/">
        b. Using Voyager Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-and-wls-server-logs/" title="c. ELK Integration for Logs" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-and-wls-server-logs/">
        c. ELK Integration for Logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/" title="d. Publish logs to Elasticsearch" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/">
        d. Publish logs to Elasticsearch
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/" title="e. Monitor a WebCenter Sites domain" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/">
        e. Monitor a WebCenter Sites domain
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/known-issues/" title="Known Issues in WCSites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/known-issues/">
          <b>5. </b>Known Issues in WCSites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/release-notes/">
        Release Notes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp;</p>
<p><a href="https://github.com/oracle/fmw-kubernetes"><i class="fab fa-github"></i> GitHub repo</a></p>


    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/fmw-kubernetes/'>Oracle Fusion Middleware on Kubernetes</a> > <a href='/fmw-kubernetes/wcsites-domains/'>Oracle WebCenter Sites</a> > <a href='/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/'>Manage WebCenter Sites domains</a> > a. Using Traefik Loadbalancer
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#setting-up-loadbalancer-traefik-for-the-webcenter-sites-domain-on-k8s">Setting Up Loadbalancer Traefik for the WebCenter Sites Domain on K8S</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              a. Using Traefik Loadbalancer
            </h1>
          

        



<h3 id="setting-up-loadbalancer-traefik-for-the-webcenter-sites-domain-on-k8s">Setting Up Loadbalancer Traefik for the WebCenter Sites Domain on K8S</h3>
<p>The Oracle WebLogic Server Kubernetes Operator supports three load balancers: Traefik, Voyager, and Apache. Follow these steps to set up Traefik as a loadbalancer for the WebCenter Sites domain:</p>
<ol>
<li><a href="#install-the-traefik-load-balancer">Install the Traefik Load Balancer</a></li>
<li><a href="#configure-traefik-to-manage-ingresses">Configure Traefik to Manage Ingresses</a></li>
<li><a href="#create-an-ingress-for-the-domain">Create an Ingress for the Domain</a></li>
<li><a href="#verify-that-you-can-access-the-domain-url">Verify that You can Access the Domain URL</a></li>
</ol>
<h4 id="install-the-traefik-load-balancer">Install the Traefik Load Balancer</h4>
<ol>
<li>
<p>Use helm to install the Traefik load balancer. For detailed information, see <a href="https://github.com/oracle/weblogic-kubernetes-operator/blob/master/kubernetes/samples/charts/traefik/README.md">this document</a>.
Use the values.yaml file in the sample but set <code>kubernetes.namespaces</code> specifically.</p>
<blockquote>
<p>Install Traefik</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd weblogic-kubernetes-operator
$ helm install stable/traefik --name traefik-operator <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --namespace traefik --values kubernetes/samples/charts/traefik/values.yaml <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set <span style="color:#e6db74">&#34;dashboard.domain=</span><span style="color:#66d9ef">$(</span>hostname -f<span style="color:#66d9ef">)</span><span style="color:#e6db74">,kubernetes.namespaces={traefik}&#34;</span>
</code></pre></div><blockquote>
<p>Output</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd weblogic-kubernetes-operator
    
$ helm install stable/traefik --name traefik-operator --namespace traefik --values kubernetes/samples/charts/traefik/values.yaml --set  <span style="color:#e6db74">&#34;dashboard.domain=</span><span style="color:#66d9ef">$(</span>hostname -f<span style="color:#66d9ef">)</span><span style="color:#e6db74">,kubernetes.namespaces={traefik}&#34;</span> --wait
NAME:   traefik-operator
LAST DEPLOYED: Sat Mar <span style="color:#ae81ff">14</span> 13:53:16 <span style="color:#ae81ff">2020</span>
NAMESPACE: traefik
STATUS: DEPLOYED
   
RESOURCES:
<span style="color:#f92672">==</span>&gt; v1/Service
NAME                        TYPE       CLUSTER-IP     EXTERNAL-IP  PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                     AGE
traefik-operator-dashboard  ClusterIP  10.108.89.215  &lt;none&gt;       80/TCP                      0s
traefik-operator            NodePort   10.99.75.162   &lt;none&gt;       443:30443/TCP,80:30305/TCP  0s
   
<span style="color:#f92672">==</span>&gt; v1/Secret
NAME                           TYPE    DATA  AGE
traefik-operator-default-cert  Opaque  <span style="color:#ae81ff">2</span>     0s
   
<span style="color:#f92672">==</span>&gt; v1/ServiceAccount
NAME              SECRETS  AGE
traefik-operator  <span style="color:#ae81ff">1</span>        0s
   
<span style="color:#f92672">==</span>&gt; v1/RoleBinding
NAME              AGE
traefik-operator  0s
   
<span style="color:#f92672">==</span>&gt; v1beta1/Ingress
NAME                        HOSTS                   ADDRESS  PORTS  AGE
traefik-operator-dashboard  abc.def.com  <span style="color:#ae81ff">80</span>       0s
   
<span style="color:#f92672">==</span>&gt; v1/Pod<span style="color:#f92672">(</span>related<span style="color:#f92672">)</span>
NAME                               READY  STATUS             RESTARTS  AGE
traefik-operator-844859fdd6-prh55  0/1    ContainerCreating  <span style="color:#ae81ff">0</span>         0s
   
<span style="color:#f92672">==</span>&gt; v1/ConfigMap
NAME              DATA  AGE
traefik-operator  <span style="color:#ae81ff">1</span>     0s
   
<span style="color:#f92672">==</span>&gt; v1/Role
NAME              AGE
traefik-operator  0s
   
<span style="color:#f92672">==</span>&gt; v1/Deployment
NAME              DESIRED  CURRENT  UP-TO-DATE  AVAILABLE  AGE
traefik-operator  <span style="color:#ae81ff">1</span>        <span style="color:#ae81ff">1</span>        <span style="color:#ae81ff">1</span>           <span style="color:#ae81ff">0</span>          0s
   
   
NOTES:
   
1. Traefik is listening on the following ports on the host machine:
   
    http - <span style="color:#ae81ff">30305</span>
    https - <span style="color:#ae81ff">30443</span>
   
2. Configure DNS records corresponding to Kubernetes ingress resources to point to the NODE_IP/NODE_HOST
</code></pre></div></li>
<li>
<p>Access the Traefik dashboard through the URL <code>http://$(hostname -f):30305</code>, with the HTTP host <code>traefik.example.com</code>.
NOTE: Make sure you specify full qualified node name for <code>$(hostname -f)</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -H <span style="color:#e6db74">&#39;host: $(hostname -f)&#39;</span> http://<span style="color:#66d9ef">$(</span>hostname -f<span style="color:#66d9ef">)</span>:30305/
&lt;a href<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/dashboard/&#34;</span>&gt;Found&lt;/a&gt;.
$
</code></pre></div></li>
</ol>
<h4 id="configure-traefik-to-manage-ingresses">Configure Traefik to Manage Ingresses</h4>
<p>Configure Traefik to manage Ingresses created in this namespace:
Note: Here traefik is the Traefik namespace, <code>wcsites-ns</code> is the namespace of the domain.</p>
<blockquote>
<p>helm upgrade for traefik</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ helm upgrade --reuse-values --set <span style="color:#e6db74">&#34;kubernetes.namespaces={traefik,wcsites-ns}&#34;</span> --wait traefik-operator stable/traefik
Release <span style="color:#e6db74">&#34;traefik-operator&#34;</span> has been upgraded. Happy Helming!
LAST DEPLOYED: Sat Mar <span style="color:#ae81ff">14</span> 13:58:03 <span style="color:#ae81ff">2020</span>
NAMESPACE: traefik
STATUS: DEPLOYED

RESOURCES:
<span style="color:#f92672">==</span>&gt; v1/ConfigMap
NAME              DATA  AGE
traefik-operator  <span style="color:#ae81ff">1</span>     5m2s

<span style="color:#f92672">==</span>&gt; v1/ClusterRole
NAME              AGE
traefik-operator  14s

<span style="color:#f92672">==</span>&gt; v1/Service
NAME                        TYPE       CLUSTER-IP     EXTERNAL-IP  PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                     AGE
traefik-operator-dashboard  ClusterIP  10.108.89.215  &lt;none&gt;       80/TCP                      5m2s
traefik-operator            NodePort   10.99.75.162   &lt;none&gt;       443:30443/TCP,80:30305/TCP  5m2s

<span style="color:#f92672">==</span>&gt; v1/Deployment
NAME              DESIRED  CURRENT  UP-TO-DATE  AVAILABLE  AGE
traefik-operator  <span style="color:#ae81ff">1</span>        <span style="color:#ae81ff">1</span>        <span style="color:#ae81ff">1</span>           <span style="color:#ae81ff">1</span>          5m2s

<span style="color:#f92672">==</span>&gt; v1/Secret
NAME                           TYPE    DATA  AGE
traefik-operator-default-cert  Opaque  <span style="color:#ae81ff">2</span>     5m2s

<span style="color:#f92672">==</span>&gt; v1/ServiceAccount
NAME              SECRETS  AGE
traefik-operator  <span style="color:#ae81ff">1</span>        5m2s

<span style="color:#f92672">==</span>&gt; v1/ClusterRoleBinding
NAME              AGE
traefik-operator  14s

<span style="color:#f92672">==</span>&gt; v1beta1/Ingress
NAME                        HOSTS                   ADDRESS  PORTS  AGE
traefik-operator-dashboard  abc.def.com  <span style="color:#ae81ff">80</span>       5m2s

<span style="color:#f92672">==</span>&gt; v1/Pod<span style="color:#f92672">(</span>related<span style="color:#f92672">)</span>
NAME                               READY  STATUS       RESTARTS  AGE
traefik-operator-844699994b-ttfb6  1/1    Running      <span style="color:#ae81ff">0</span>         14s
traefik-operator-844859fdd6-prh55  0/1    Terminating  <span style="color:#ae81ff">0</span>         5m2s


NOTES:

1. Traefik is listening on the following ports on the host machine:

     http - <span style="color:#ae81ff">30305</span>
     https - <span style="color:#ae81ff">30443</span>

2. Configure DNS records corresponding to Kubernetes ingress resources to point to the NODE_IP/NODE_HOST
</code></pre></div><h4 id="create-an-ingress-for-the-domain">Create an Ingress for the Domain</h4>
<ol>
<li>
<p>Create an Ingress for the domain (<code>ingress-per-domain-wcsites</code>), in the domain namespace by using the sample Helm chart.
Here we are using the path-based routing for ingress. For detailed instructions about ingress, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/ingress/">this page</a>).</p>
<p>For now, you can update the <code>kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/values.yaml</code> with appropriate values. Sample values are shown below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/values.yaml
   
<span style="color:#75715e"># Copyright 2020, Oracle Corporation and/or its affiliates.</span>
<span style="color:#75715e"># Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.</span>
   
<span style="color:#75715e"># Default values for ingress-per-domain.</span>
<span style="color:#75715e"># This is a YAML-formatted file.</span>
<span style="color:#75715e"># Declare variables to be passed into your templates.</span>
   
<span style="color:#75715e"># Load balancer type.  Supported values are: TRAEFIK, VOYAGER</span>
type: TRAEFIK
<span style="color:#75715e">#type: VOYAGER</span>
   
<span style="color:#75715e"># WLS domain as backend to the load balancer</span>
wlsDomain:
domainUID: wcsitesinfra
adminServerName: adminserver
adminServerPort: <span style="color:#ae81ff">7001</span>
wcsitesClusterName: wcsites_cluster
wcsitesManagedServerPort: <span style="color:#ae81ff">8001</span>
   
<span style="color:#75715e"># Voyager specific values</span>
voyager:
<span style="color:#75715e"># web port</span>
webPort: <span style="color:#ae81ff">30305</span>
<span style="color:#75715e"># stats port</span>
statsPort: <span style="color:#ae81ff">30317</span>   
</code></pre></div></li>
<li>
<p>Update the <code>kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/templates/traefik-ingress.yaml</code> with the url routes to be load balanced.</p>
<p>Below are the defined ingress rules:</p>
<p>NOTE: This is not an exhaustive list of rules. You can enhance it based on the application urls that need to be accessed externally. These rules hold good for domain type <code>WCSITES</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ vi kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/templates/traefik-ingress.yaml
   
<span style="color:#75715e"># Copyright 2020, Oracle Corporation and/or its affiliates.</span>
<span style="color:#75715e"># Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.</span>

<span style="color:#f92672">{{</span>- <span style="color:#66d9ef">if</span> eq .Values.type <span style="color:#e6db74">&#34;TRAEFIK&#34;</span> <span style="color:#f92672">}}</span>
---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-traefik
  namespace: <span style="color:#f92672">{{</span> .Release.Namespace <span style="color:#f92672">}}</span>
  labels:
    weblogic.resourceVersion: domain-v2
spec:
  annotations:
    kubernetes.io/ingress.class: traefik
  rules:
  - host: <span style="color:#e6db74">&#39;{{ .Values.traefik.hostname }}&#39;</span>
    http:
      paths:
      - path: /console
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-{{ .Values.wlsDomain.adminServerName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /em
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-{{ .Values.wlsDomain.adminServerName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /wls-exporter
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-{{ .Values.wlsDomain.adminServerName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /weblogic
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-{{ .Values.wlsDomain.adminServerName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /sbconsole
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-{{ .Values.wlsDomain.adminServerName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /sites
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-cluster-{{ .Values.wlsDomain.wcsitesClusterName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.wcsitesManagedServerPort <span style="color:#f92672">}}</span>
      - path: /cas
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-cluster-{{ .Values.wlsDomain.wcsitesClusterName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.wcsitesManagedServerPort <span style="color:#f92672">}}</span>
      - path: /wls-exporter
        backend:
          serviceName: <span style="color:#e6db74">&#39;{{ .Values.wlsDomain.domainUID }}-cluster-{{ .Values.wlsDomain.wcsitesClusterName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.wcsitesManagedServerPort <span style="color:#f92672">}}</span>
 <span style="color:#75715e">#     - path: /wls-cat</span>
 <span style="color:#75715e">#       backend:</span>
 <span style="color:#75715e">#         serviceName: &#39;{{ .Values.wlsDomain.domainUID }}-cluster-{{ .Values.wlsDomain.wcsitesClusterName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
 <span style="color:#75715e">#         servicePort: {{ .Values.wlsDomain.wcsitesManagedServerPort }}</span>
 <span style="color:#75715e">#     - path:</span>
 <span style="color:#75715e">#       backend:</span>
 <span style="color:#75715e">#         serviceName: &#39;{{ .Values.wlsDomain.domainUID }}-cluster-{{ .Values.wlsDomain.wcsitesClusterName | lower | replace &#34;_&#34; &#34;-&#34; }}&#39;</span>
 <span style="color:#75715e">#         servicePort: {{ .Values.wlsDomain.wcsitesManagedServerPort }}</span>
<span style="color:#f92672">{{</span>- end <span style="color:#f92672">}}</span>

</code></pre></div></li>
<li>
<p>Install &ldquo;ingress-per-domain&rdquo; using helm.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">bash-4.2$ cd weblogic-kubernetes-operator
    
bash-4.2$ helm install kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --name wcsitesinfra-ingress --namespace wcsites-ns <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --values kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/values.yaml <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --set <span style="color:#e6db74">&#34;traefik.hostname=</span><span style="color:#66d9ef">$(</span>hostname -f<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
     
NAME:   wcsitesinfra-ingress
LAST DEPLOYED: Sat Mar <span style="color:#ae81ff">14</span> 14:03:22 <span style="color:#ae81ff">2020</span>
NAMESPACE: wcsites-ns
STATUS: DEPLOYED

RESOURCES:
<span style="color:#f92672">==</span>&gt; v1beta1/Ingress
NAME                  HOSTS        ADDRESS  PORTS  AGE
wcsitesinfra-traefik  abc.def.com  <span style="color:#ae81ff">80</span>       0s
</code></pre></div></li>
<li>
<p>To confirm that the load balancer noticed the new Ingress and is successfully routing to the domain&rsquo;s server pods, you can send a request to the URL for the &ldquo;WebLogic ReadyApp framework&rdquo; which should return a HTTP 200 status code, as shown in the example below:</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">-bash-4.2$ curl -v http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/weblogic/ready
*   Trying 149.87.129.203...
&gt; GET http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/weblogic/ready HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Accept: */*
&gt; Proxy-Connection: Keep-Alive
&gt; host: <span style="color:#66d9ef">$(</span>hostname -f<span style="color:#66d9ef">)</span>
&gt;
&lt; HTTP/1.1 <span style="color:#ae81ff">200</span> OK
&lt; Date: Sat, <span style="color:#ae81ff">14</span> Mar <span style="color:#ae81ff">2020</span> 08:35:03 GMT
&lt; Vary: Accept-Encoding
&lt; Content-Length: <span style="color:#ae81ff">0</span>
&lt; Proxy-Connection: Keep-Alive
&lt;
* Connection <span style="color:#75715e">#0 to host localhost left intact</span>
</code></pre></div><h4 id="verify-that-you-can-access-the-domain-url">Verify that You can Access the Domain URL</h4>
<p>After setting up the Traefik loadbalancer, verify that the domain applications are accessible through the loadbalancer port 30305.
Through load balancer <code>(Traefik port 30305)</code>, the following URLs are available for setting up domains of WebCenter Sites domain types:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/weblogic/ready
http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/console
http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/em
http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/sites/version.jsp
</code></pre></div>

<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/" title="Manage WebCenter Sites domains"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/" title="b. Using Voyager Loadbalancer" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/fmw-kubernetes/js/clipboard.min.js?1584586670"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.min.js?1584586670"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.jquery.min.js?1584586670"></script>
    <script src="/fmw-kubernetes/js/jquery.sticky.js?1584586670"></script>
    <script src="/fmw-kubernetes/js/featherlight.min.js?1584586670"></script>
    <script src="/fmw-kubernetes/js/highlight.pack.js?1584586670"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/fmw-kubernetes/js/modernizr.custom-3.6.0.js?1584586670"></script>
    <script src="/fmw-kubernetes/js/learn.js?1584586670"></script>
    <script src="/fmw-kubernetes/js/hugo-learn.js?1584586670"></script>

    <link href="/fmw-kubernetes/mermaid/mermaid.css?1584586670" rel="stylesheet" />
    <script src="/fmw-kubernetes/mermaid/mermaid.js?1584586670"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

