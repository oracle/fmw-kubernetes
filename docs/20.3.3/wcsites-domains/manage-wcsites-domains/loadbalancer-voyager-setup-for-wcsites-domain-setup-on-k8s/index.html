<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.72.0" />
    <meta name="description" content="Steps to set up Voyager as a loadbalancer for the WebCenter Sites domain.">


    <link rel="icon" href="/fmw-kubernetes/images/favicon.png" type="image/png">

    <title>b. Using Voyager Loadbalancer :: Oracle Fusion Middleware on Kubernetes</title>

    
    <link href="/fmw-kubernetes/css/nucleus.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/fontawesome-all.min.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hybrid.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/featherlight.min.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/perfect-scrollbar.min.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/auto-complete.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/atom-one-dark-reasonable.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/theme.css?1603091197" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hugo-theme.css?1603091197" rel="stylesheet">
    

    <script src="/fmw-kubernetes/js/jquery-3.3.1.min.js?1603091197"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/fmw-kubernetes/">
  <img src="/fmw-kubernetes//images/fmw_12c_12_2_1_4_0-logo.png" height="100"><br/>
  <b>Oracle Fusion Middleware on Kubernetes </b>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/fmw-kubernetes/js/lunr.min.js?1603091197"></script>
<script type="text/javascript" src="/fmw-kubernetes/js/auto-complete.js?1603091197"></script>
<script type="text/javascript">
    
        var baseurl = "\/fmw-kubernetes\/";
    
</script>
<script type="text/javascript" src="/fmw-kubernetes/js/search.js?1603091197"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
        <li><a  class="" href="/fmw-kubernetes/">Home</a></li>
        
          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/" title="Oracle SOA Suite" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/">
          Oracle SOA Suite
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/release-notes/">
        <b>1. </b>Release Notes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/" title="Install Guide" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/">
          <b>2. </b>Install Guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/prerequisites/" title="Requirements and limitations" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/prerequisites/">
          <b>  </b>Requirements and limitations
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/prepare-your-environment/">
          <b>  </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/installguide/create-soa-domains/" title="Create Oracle SOA Suite domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/installguide/create-soa-domains/">
          <b>  </b>Create Oracle SOA Suite domains
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/" title="Administration Guide" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/adminguide/">
          <b>3.  </b>Administration Guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/" title="Set up a load balancer" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/">
          <b> </b>Set up a load balancer
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/traefik/" title="Traefik" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/traefik/">
        <b>a. </b>Traefik
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/nginx/" title="NGINX" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/nginx/">
        <b>b. </b>NGINX
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/voyager/" title="Voyager" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/voyager/">
        <b>c. </b>Voyager
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/apache/" title="Apache webtier" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configure-load-balancer/apache/">
        <b>d. </b>Apache webtier
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/configuring-custom-ssl-certificates/" title="Configure SSL certificates" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/configuring-custom-ssl-certificates/">
        <b> </b>Configure SSL certificates
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/monitoring-soa-domains/" title="Monitor a domain and publish logs" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/monitoring-soa-domains/">
        <b> </b>Monitor a domain and publish logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/enablingt3/" title="Expose the T3/T3S protocol" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/enablingt3/">
        <b> </b>Expose the T3/T3S protocol
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/" title="Deploy composite applications" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/">
          <b>  </b>Deploy composite applications
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/supportjdev/" title="Deploy using JDeveloper" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/supportjdev/">
        <b>a. </b>Deploy using JDeveloper
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/deploy-using-maven-ant/" title="Deploy using Maven and Ant" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/deploying-composites/deploy-using-maven-ant/">
        <b>b. </b>Deploy using Maven and Ant
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/jms-asm-migration/" title="Configure Automatic Service Migration" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/jms-asm-migration/">
        <b></b>Configure Automatic Service Migration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/adminguide/persisting-soa-adapters-customizations/" title="Persist adapter customizations" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/adminguide/persisting-soa-adapters-customizations/">
        <b></b>Persist adapter customizations
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/" title="Patch and upgrade" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/">
          <b>4. </b>Patch and upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/patch-an-image/" title="Patch an image" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/patch-an-image/">
        <b>a. </b>Patch an image
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-operator-release/" title="Upgrade an operator release" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-operator-release/">
        <b>b. </b>Upgrade an operator release
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-k8s-cluster/" title="Upgrade a Kubernetes cluster" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/patch_and_upgrade/upgrade-k8s-cluster/">
        <b>c. </b>Upgrade a Kubernetes cluster
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/create-or-update-image/" title="Create or update an image" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/create-or-update-image/">
          <b>5. </b>Create or update an image
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/cleanup-domain-setup/" title="Uninstall" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/cleanup-domain-setup/">
        <b>6. </b>Uninstall
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/faq/" title="Frequently Asked Questions" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/faq/">
        <b>7. </b>Frequently Asked Questions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/" title="Appendix" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/appendix/">
          <b>8. </b>Appendix
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/soa-cluster-sizing-info/" title="Domain resource sizing" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/appendix/soa-cluster-sizing-info/">
        <b> </b>Domain resource sizing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/quickstart-deployment-on-prem/" title="Quick start deployment on-premise" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/appendix/quickstart-deployment-on-prem/">
        <b> </b>Quick start deployment on-premise
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/appendix/docker-k8s-hardening/" title="Security hardening" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/appendix/docker-k8s-hardening/">
        <b> </b>Security hardening
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/" title="Oracle WebCenter Sites" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/">
          Oracle WebCenter Sites
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/pre-requisites/" title="Pre-requisites " class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/pre-requisites/">
          <b>1. </b>Pre-requisites 
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/prepare-your-environment/">
          <b>2. </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/" title="Create WebCenter Sites domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/">
          <b>3. </b>Create WebCenter Sites domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/" title="Manage WebCenter Sites domains" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/">
          <b>4. </b>Manage WebCenter Sites domains
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/" title="a. Using Traefik Loadbalancer" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/">
        a. Using Traefik Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/" title="b. Using Voyager Loadbalancer" class="dd-item active">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/">
        b. Using Voyager Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-and-wls-server-logs/" title="c. ELK Integration for Logs" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-and-wls-server-logs/">
        c. ELK Integration for Logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/" title="d. Publish logs to Elasticsearch" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/">
        d. Publish logs to Elasticsearch
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/" title="e. Monitor a WebCenter Sites domain" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/">
        e. Monitor a WebCenter Sites domain
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/known-issues/" title="Known Issues in WCSites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/known-issues/">
          <b>5. </b>Known Issues in WCSites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/release-notes/">
        Release Notes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp;</p>
<p><a href="https://github.com/oracle/fmw-kubernetes"><i class="fab fa-github"></i> GitHub repo</a></p>


    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/fmw-kubernetes/'>Oracle Fusion Middleware on Kubernetes</a> > <a href='/fmw-kubernetes/wcsites-domains/'>Oracle WebCenter Sites</a> > <a href='/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/'>Manage WebCenter Sites domains</a> > b. Using Voyager Loadbalancer
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#setting-up-loadbalancer-voyager-for-the-webcenter-sites-domain-on-k8s">Setting Up Loadbalancer Voyager for the WebCenter Sites Domain on K8S</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              b. Using Voyager Loadbalancer
            </h1>
          

        



<h3 id="setting-up-loadbalancer-voyager-for-the-webcenter-sites-domain-on-k8s">Setting Up Loadbalancer Voyager for the WebCenter Sites Domain on K8S</h3>
<p>The Oracle WebLogic Server Kubernetes Operator supports three load balancers: Traefik, Voyager, and Apache. Follow these steps to set up Voyager as a loadbalancer for the WebCenter Sites domain:</p>
<ol>
<li><a href="#install-the-voyager-load-balancer">Install the Voyager Load Balancer</a></li>
<li><a href="#configure-voyager-to-manage-ingresses">Configure Voyager to Manage Ingresses</a></li>
<li><a href="#verify-that-you-can-access-the-domain-url">Verify that You can Access the Domain URL</a></li>
</ol>
<h4 id="install-the-voyager-load-balancer">Install the Voyager Load Balancer</h4>
<p>See the official installation document and follow step 1 and 2 <a href="https://github.com/oracle/weblogic-kubernetes-operator/blob/master/kubernetes/samples/charts/voyager/README.md#a-step-by-step-guide-to-install-the-voyager-operator">here</a>.</p>
<h4 id="configure-voyager-to-manage-ingresses">Configure Voyager to Manage Ingresses</h4>
<ol>
<li>
<p>Create an Ingress for the domain (<code>ingress-per-domain</code>) in the domain namespace, by using the sample Helm chart.</p>
<p>Here we are using the path based routing for ingress. For detailed instructions about ingress, refer this <a href="https://github.com/oracle/weblogic-kubernetes-operator/tree/master/kubernetes/samples/charts/voyager#install-a-path-routing-ingress">page</a>.</p>
<p>For this update the <code>kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/values.yaml</code> with appropriate values, sample values are shown below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">-bash-4.2$ cat kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/values.yaml
    
type: VOYAGER
    
<span style="color:#75715e"># Copyright 2020, Oracle Corporation and/or its affiliates.</span>
<span style="color:#75715e"># Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.</span>
    
<span style="color:#75715e"># Default values for ingress-per-domain.</span>
<span style="color:#75715e"># This is a YAML-formatted file.</span>
<span style="color:#75715e"># Declare variables to be passed into your templates.</span>
    
<span style="color:#75715e"># Load balancer type.  Supported values are: TRAEFIK, VOYAGER</span>
<span style="color:#75715e">#type: TRAEFIK</span>
type: VOYAGER
    
<span style="color:#75715e"># WLS domain as backend to the load balancer</span>
wlsDomain:
  domainUID: wcsitesinfra
  adminServerName: adminserver
  adminServerPort: <span style="color:#ae81ff">7001</span>
  wcsitesClusterName: wcsites_cluster
  wcsitesManagedServerPort: <span style="color:#ae81ff">8001</span>
    
<span style="color:#75715e"># Voyager specific values</span>
voyager:
  <span style="color:#75715e"># web port</span>
  webPort: <span style="color:#ae81ff">30305</span>
  <span style="color:#75715e"># stats port</span>
  statsPort: <span style="color:#ae81ff">30317</span>
</code></pre></div></li>
<li>
<p>Update the <code>kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/templates/voyager-ingress.yaml</code> with the url routes to be load balanced.</p>
<p>Below are the ingress rules defined:</p>
<p>NOTE: These are not the exhausted list of rules. These can be enhanced based on the application urls that needs to be accessed externally.</p>
<p>Below rules hold good for domain type WCSITES.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Copyright 2020, Oracle Corporation and/or its affiliates.</span>
<span style="color:#75715e"># Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.</span>
    
<span style="color:#f92672">{{</span>- <span style="color:#66d9ef">if</span> eq .Values.type <span style="color:#e6db74">&#34;VOYAGER&#34;</span> <span style="color:#f92672">}}</span>
---
apiVersion: voyager.appscode.com/v1beta1
kind: Ingress
metadata:
  name: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-voyager
  namespace: <span style="color:#f92672">{{</span> .Release.Namespace <span style="color:#f92672">}}</span>
  annotations:
    ingress.appscode.com/type: <span style="color:#e6db74">&#39;NodePort&#39;</span>
    ingress.appscode.com/stats: <span style="color:#e6db74">&#39;true&#39;</span>
    ingress.appscode.com/affinity: <span style="color:#e6db74">&#39;cookie&#39;</span>
    ingress.appscode.com/default-timeout: <span style="color:#e6db74">&#39;{&#34;connect&#34;: &#34;1800s&#34;, &#34;server&#34;: &#34;1800s&#34;}&#39;</span>
spec:
  rules:
  - host: <span style="color:#e6db74">&#39;*&#39;</span>
    http:
      nodePort: <span style="color:#f92672">{{</span> .Values.voyager.webPort <span style="color:#f92672">}}</span>
      paths:
      - path: /console
        backend:
          serviceName: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-<span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerName | lower | replace <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">}}</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /em
        backend:
          serviceName: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-<span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerName | lower | replace <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">}}</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
<span style="color:#75715e">#      - path: /wls-exporter</span>
<span style="color:#75715e">#        backend:</span>
<span style="color:#75715e">#          serviceName: {{ .Values.wlsDomain.domainUID }}-{{ .Values.wlsDomain.adminServerName | lower | replace &#34;_&#34; &#34;-&#34; }}</span>
<span style="color:#75715e">#          servicePort: {{ .Values.wlsDomain.adminServerPort }}</span>
      - path: /weblogic
        backend:
          serviceName: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-<span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerName | lower | replace <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">}}</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /sbconsole
        backend:
          serviceName: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-<span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerName | lower | replace <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">}}</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.adminServerPort <span style="color:#f92672">}}</span>
      - path: /sites
        backend:
          serviceName: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-cluster-<span style="color:#f92672">{{</span> .Values.wlsDomain.wcsitesClusterName | lower | replace <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">}}</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.wcsitesManagedServerPort <span style="color:#f92672">}}</span>
      - path: /cas
        backend:
          serviceName: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-cluster-<span style="color:#f92672">{{</span> .Values.wlsDomain.wcsitesClusterName | lower | replace <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">}}</span>
          servicePort: <span style="color:#f92672">{{</span> .Values.wlsDomain.wcsitesManagedServerPort <span style="color:#f92672">}}</span>
<span style="color:#75715e">#      - path: /wls-exporter</span>
<span style="color:#75715e">#        backend:</span>
<span style="color:#75715e">#          serviceName: {{ .Values.wlsDomain.domainUID }}-cluster-{{ .Values.wlsDomain.wcsitesClusterName | lower | replace &#34;_&#34; &#34;-&#34; }}</span>
<span style="color:#75715e">#          servicePort: {{ .Values.wlsDomain.wcsitesManagedServerPort }}</span>
    
---
apiVersion: v1
kind: Service
metadata:
  name: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-voyager-stats
  namespace: <span style="color:#f92672">{{</span> .Release.Namespace <span style="color:#f92672">}}</span>
spec:
  type: NodePort
  ports:
    - name: client
      protocol: TCP
      port: <span style="color:#ae81ff">56789</span>
      targetPort: <span style="color:#ae81ff">56789</span>
      nodePort: <span style="color:#f92672">{{</span> .Values.voyager.statsPort <span style="color:#f92672">}}</span>
  selector:
    origin: voyager
    origin-name: <span style="color:#f92672">{{</span> .Values.wlsDomain.domainUID <span style="color:#f92672">}}</span>-voyager
<span style="color:#f92672">{{</span>- end <span style="color:#f92672">}}</span>
</code></pre></div></li>
<li>
<p>Install <code>ingress-per-domain</code> using helm.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> bash-4.2$ cd weblogic-kubernetes-operator
    
-bash-4.2$ helm install kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> --name wcsitesinfra-voyager-ingress --namespace wcsites-ns <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> --values kubernetes/samples/scripts/create-wcsites-domain/ingress-per-domain/values.yaml
    
    
NAME:   wcsitesinfra-voyager-ingress
LAST DEPLOYED: Fri Feb <span style="color:#ae81ff">14</span> 13:20:17 <span style="color:#ae81ff">2020</span>
NAMESPACE: wcsites-ns
STATUS: DEPLOYED
    
RESOURCES:
<span style="color:#f92672">==</span>&gt; v1/Service
NAME                        TYPE      CLUSTER-IP     EXTERNAL-IP  PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>          AGE
wcsitesinfra-voyager-stats  NodePort  10.101.94.249  &lt;none&gt;       56789:30317/TCP  0s
    
<span style="color:#f92672">==</span>&gt; v1beta1/Ingress
NAME                  HOSTS                         ADDRESS  PORTS  AGE
wcsitesinfra-ingress  yourcompany-loadbalancer.com  <span style="color:#ae81ff">80</span>       0s
    
NAME                  AGE
wcsitesinfra-voyager  0s
</code></pre></div></li>
<li>
<p>To confirm that the load balancer noticed the new Ingress and is successfully routing to the domain&rsquo;s server pods, you can send a request to the URL for the &ldquo;WebLogic ReadyApp framework&rdquo; which should return a HTTP 200 status code, as shown in the example below:</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">-bash-4.2$ curl -v http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/weblogic/ready
* About to connect<span style="color:#f92672">()</span> to localhost port <span style="color:#ae81ff">30305</span> <span style="color:#f92672">(</span><span style="color:#75715e">#0)</span>
*   Trying 127.0.0.1...
* Connected to localhost <span style="color:#f92672">(</span>127.0.0.1<span style="color:#f92672">)</span> port <span style="color:#ae81ff">30305</span> <span style="color:#f92672">(</span><span style="color:#75715e">#0)</span>
&gt; GET /weblogic/ready HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Accept: */*
&gt; host: *****.com
&gt;
&lt; HTTP/1.1 <span style="color:#ae81ff">200</span> OK
&lt; Content-Length: <span style="color:#ae81ff">0</span>
&lt; Date: Thu, <span style="color:#ae81ff">12</span> Mar <span style="color:#ae81ff">2020</span> 10:16:43 GMT
&lt; Vary: Accept-Encoding
&lt;
* Connection <span style="color:#75715e">#0 to host localhost left intact</span>
</code></pre></div><h4 id="verify-that-you-can-access-the-domain-url">Verify that You can Access the Domain URL</h4>
<p>After setting up the Traefik loadbalancer, verify that the domain applications are accessible through the loadbalancer port 30305.
Through load balancer (Traefik port 30305), the following URLs are available for setting up domains of WebCenter Sites domain types:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/weblogic/ready
http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/console
http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/em
http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-PORT<span style="color:#e6db74">}</span>/sites/version.jsp
</code></pre></div>

<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/" title="a. Using Traefik Loadbalancer"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-and-wls-server-logs/" title="c. ELK Integration for Logs" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/fmw-kubernetes/js/clipboard.min.js?1603091197"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.min.js?1603091197"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.jquery.min.js?1603091197"></script>
    <script src="/fmw-kubernetes/js/jquery.sticky.js?1603091197"></script>
    <script src="/fmw-kubernetes/js/featherlight.min.js?1603091197"></script>
    <script src="/fmw-kubernetes/js/highlight.pack.js?1603091197"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/fmw-kubernetes/js/modernizr.custom-3.6.0.js?1603091197"></script>
    <script src="/fmw-kubernetes/js/learn.js?1603091197"></script>
    <script src="/fmw-kubernetes/js/hugo-learn.js?1603091197"></script>

    <link href="/fmw-kubernetes/mermaid/mermaid.css?1603091197" rel="stylesheet" />
    <script src="/fmw-kubernetes/mermaid/mermaid.js?1603091197"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

