<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.72.0" />
    <meta name="description" content="Configure the Apache webtier load balancer for Oracle SOA Suite domains.">


    <link rel="icon" href="/fmw-kubernetes/20.4.2/images/favicon.png" type="image/png">

    <title>Apache webtier :: Oracle Fusion Middleware on Kubernetes</title>

    
    <link href="/fmw-kubernetes/20.4.2/css/nucleus.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/fontawesome-all.min.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/hybrid.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/featherlight.min.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/perfect-scrollbar.min.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/auto-complete.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/atom-one-dark-reasonable.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/theme.css?1607682397" rel="stylesheet">
    <link href="/fmw-kubernetes/20.4.2/css/hugo-theme.css?1607682397" rel="stylesheet">
    

    <script src="/fmw-kubernetes/20.4.2/js/jquery-3.3.1.min.js?1607682397"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/apache/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/fmw-kubernetes/20.4.2/">
  <img src="/fmw-kubernetes/20.4.2//images/fmw_12c_12_2_1_4_0-logo.png" height="100"><br/>
  <b>Oracle Fusion Middleware on Kubernetes </b>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/fmw-kubernetes/20.4.2/js/lunr.min.js?1607682397"></script>
<script type="text/javascript" src="/fmw-kubernetes/20.4.2/js/auto-complete.js?1607682397"></script>
<script type="text/javascript">
    
        var baseurl = "\/fmw-kubernetes\/20.4.2\/";
    
</script>
<script type="text/javascript" src="/fmw-kubernetes/20.4.2/js/search.js?1607682397"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
        <li><a  class="" href="/fmw-kubernetes/">Home</a></li>
        
          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/" title="Oracle SOA Suite" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/">
          Oracle SOA Suite
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/release-notes/">
        <b>1. </b>Release Notes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/installguide/" title="Install Guide" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/installguide/">
          <b>2. </b>Install Guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/installguide/prerequisites/" title="Requirements and limitations" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/installguide/prerequisites/">
          <b>  </b>Requirements and limitations
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/installguide/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/installguide/prepare-your-environment/">
          <b>  </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/installguide/create-soa-domains/" title="Create Oracle SOA Suite domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/installguide/create-soa-domains/">
          <b>  </b>Create Oracle SOA Suite domains
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/" title="Administration Guide" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/">
          <b>3.  </b>Administration Guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/" title="Set up a load balancer" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/">
          <b> </b>Set up a load balancer
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/traefik/" title="Traefik" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/traefik/">
        <b>a. </b>Traefik
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/nginx/" title="NGINX" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/nginx/">
        <b>b. </b>NGINX
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/voyager/" title="Voyager" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/voyager/">
        <b>c. </b>Voyager
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/apache/" title="Apache webtier" class="dd-item active">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/apache/">
        <b>d. </b>Apache webtier
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configuring-custom-ssl-certificates/" title="Configure SSL certificates" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configuring-custom-ssl-certificates/">
        <b> </b>Configure SSL certificates
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/monitoring-soa-domains/" title="Monitor a domain and publish logs" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/monitoring-soa-domains/">
        <b> </b>Monitor a domain and publish logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/enablingt3/" title="Expose the T3/T3S protocol" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/enablingt3/">
        <b> </b>Expose the T3/T3S protocol
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/deploying-composites/" title="Deploy composite applications" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/deploying-composites/">
          <b>  </b>Deploy composite applications
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/deploying-composites/supportjdev/" title="Deploy using JDeveloper" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/deploying-composites/supportjdev/">
        <b>a. </b>Deploy using JDeveloper
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/deploying-composites/deploy-using-maven-ant/" title="Deploy using Maven and Ant" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/deploying-composites/deploy-using-maven-ant/">
        <b>b. </b>Deploy using Maven and Ant
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/jms-asm-migration/" title="Configure Automatic Service Migration" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/jms-asm-migration/">
        <b></b>Configure Automatic Service Migration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/adminguide/persisting-soa-adapters-customizations/" title="Persist adapter customizations" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/persisting-soa-adapters-customizations/">
        <b></b>Persist adapter customizations
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/" title="Patch and upgrade" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/">
          <b>4. </b>Patch and upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/patch-an-image/" title="Patch an image" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/patch-an-image/">
        <b>a. </b>Patch an image
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/upgrade-operator-release/" title="Upgrade an operator release" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/upgrade-operator-release/">
        <b>b. </b>Upgrade an operator release
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/upgrade-k8s-cluster/" title="Upgrade a Kubernetes cluster" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/patch_and_upgrade/upgrade-k8s-cluster/">
        <b>c. </b>Upgrade a Kubernetes cluster
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/create-or-update-image/" title="Create or update an image" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/create-or-update-image/">
          <b>5. </b>Create or update an image
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/cleanup-domain-setup/" title="Uninstall" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/cleanup-domain-setup/">
        <b>6. </b>Uninstall
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/faq/" title="Frequently Asked Questions" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/faq/">
        <b>7. </b>Frequently Asked Questions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/appendix/" title="Appendix" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/20.4.2/soa-domains/appendix/">
          <b>8. </b>Appendix
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/appendix/soa-cluster-sizing-info/" title="Domain resource sizing" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/appendix/soa-cluster-sizing-info/">
        <b> </b>Domain resource sizing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/appendix/quickstart-deployment-on-prem/" title="Quick start deployment on-premise" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/appendix/quickstart-deployment-on-prem/">
        <b> </b>Quick start deployment on-premise
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/20.4.2/soa-domains/appendix/docker-k8s-hardening/" title="Security hardening" class="dd-item ">
        <a href="/fmw-kubernetes/20.4.2/soa-domains/appendix/docker-k8s-hardening/">
        <b> </b>Security hardening
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp;</p>
<p><a href="https://github.com/oracle/fmw-kubernetes"><i class="fab fa-github"></i> GitHub repo</a></p>


    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/fmw-kubernetes/20.4.2/'>Oracle Fusion Middleware on Kubernetes</a> > <a href='/fmw-kubernetes/20.4.2/soa-domains/'>Oracle SOA Suite</a> > <a href='/fmw-kubernetes/20.4.2/soa-domains/adminguide/'>Administration Guide</a> > <a href='/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/'>Set up a load balancer</a> > Apache webtier
          
         
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Apache webtier
            </h1>
          

        



<p>This section provides information about how to install and configure <em>Apache webtier</em> to load balance Oracle SOA Suite domain clusters. You can configure Apache webtier for non-SSL and SSL termination access of the application URL.</p>
<p>Follow these steps to set up Apache webtier as a load balancer for an Oracle SOA Suite domain in a Kubernetes cluster:</p>
<ol>
<li><a href="#build-the-apache-webtier-image">Build the Apache webtier image</a></li>
<li><a href="#create-the-apache-plugin-configuration-file">Create the Apache plugin configuration file</a></li>
<li><a href="#prepare-the-certificate-and-private-key">Prepare the certificate and private key</a></li>
<li><a href="#install-the-apache-webtier-helm-chart">Install the Apache webtier Helm chart</a></li>
<li><a href="#verify-domain-application-url-access">Verify domain application URL access</a></li>
<li><a href="#uninstall-apache-webtier">Uninstall Apache webtier</a></li>
</ol>
<h4 id="build-the-apache-webtier-image">Build the Apache webtier image</h4>
<p>Refer to the <a href="https://github.com/oracle/docker-images/tree/master/OracleWebLogic/samples/12213-webtier-apache">sample</a>, to build the Apache webtier Docker image.</p>
<h4 id="create-the-apache-plugin-configuration-file">Create the Apache plugin configuration file</h4>
<ol>
<li>
<p>The configuration file named <code>custom_mod_wl_apache.conf</code> should have all the URL routing rules for the Oracle SOA Suite applications deployed in the domain that needs to be accessible externally. Update this file with values based on your environment. The file content is similar to below. This directory location of this configuration file is referred as <code>host-config-dir</code> in <code>input.yaml</code>.</p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Click here to see the sample content of the configuration file custom_mod_wl_apache.conf for soa domain
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
 <span style="color:#75715e"># Copyright (c) 2020 Oracle and/or its affiliates.</span>
 #
 <span style="color:#75715e"># Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.</span>
 #

 &lt;IfModule mod_weblogic.c&gt;
 WebLogicHost &lt;WEBLOGIC_HOST&gt;
 WebLogicPort <span style="color:#ae81ff">7001</span>
 &lt;/IfModule&gt;

 <span style="color:#75715e"># Directive for weblogic admin Console deployed on WebLogic Admin Server</span>

 &lt;Location /console&gt;
 SetHandler weblogic-handler
 WebLogicHost soainfra-adminserver
 WebLogicPort <span style="color:#ae81ff">7001</span>
 &lt;/Location&gt;

 &lt;Location /em&gt;
 SetHandler weblogic-handler
 WebLogicHost soainfra-adminserver
 WebLogicPort <span style="color:#ae81ff">7001</span>
 &lt;/Location&gt;

 &lt;Location /servicebus&gt;
 SetHandler weblogic-handler
 WebLogicHost soainfra-adminserver
 WebLogicPort <span style="color:#ae81ff">7001</span>
 &lt;/Location&gt;

 &lt;Location /lwpfconsole&gt;
 SetHandler weblogic-handler
 WebLogicHost soainfra-adminserver
 WebLogicPort <span style="color:#ae81ff">7001</span>
 &lt;/Location&gt;

 &lt;Location /weblogic/ready&gt;
 SetHandler weblogic-handler
 WebLogicHost soainfra-adminserver
 WebLogicPort <span style="color:#ae81ff">7001</span>
 &lt;/Location&gt;
<span style="color:#75715e"># Directive for all application deployed on weblogic cluster with a prepath defined by LOCATION variable</span>
<span style="color:#75715e"># For example, if the LOCAITON is set to &#39;/weblogic&#39;, all applications deployed on the cluster can be accessed via</span>
<span style="color:#75715e"># http://myhost:myport/weblogic/application_end_url</span>
<span style="color:#75715e"># where &#39;myhost&#39; is the IP of the machine that runs the Apache web tier, and</span>
<span style="color:#75715e">#       &#39;myport&#39; is the port that the Apache web tier is publicly exposed to.</span>
<span style="color:#75715e"># Note that LOCATION cannot be set to &#39;/&#39; unless this is the only Location module configured.</span>
&lt;Location /soa-infra&gt;
WLSRequest On
WebLogicCluster soainfra-cluster-soa-cluster:8001
PathTrim /weblogic1
&lt;/Location&gt;

&lt;Location /soa/composer&gt;
 WLSRequest On
 WebLogicCluster soainfra-cluster-soa-cluster:8001
 PathTrim /weblogic1
&lt;/Location&gt;

&lt;Location /integration/worklistapp&gt;
WLSRequest On
WebLogicCluster soainfra-cluster-soa-cluster:8001
PathTrim /weblogic1
&lt;/Location&gt;

&lt;Location /ess&gt;
WLSRequest On
WebLogicCluster soainfra-cluster-soa-cluster:8001
PathTrim /weblogic1
&lt;/Location&gt;

&lt;Location /EssHealthCheck&gt;
WLSRequest On
WebLogicCluster soainfra-cluster-soa-cluster:8001
PathTrim /weblogic1
&lt;/Location&gt;
<span style="color:#75715e"># Directive for all application deployed on weblogic cluster with a prepath defined by LOCATION2 variable</span>
<span style="color:#75715e"># For example, if the LOCAITON2 is set to &#39;/weblogic2&#39;, all applications deployed on the cluster can be accessed via</span>
<span style="color:#75715e"># http://myhost:myport/weblogic2/application_end_url</span>
<span style="color:#75715e"># where &#39;myhost&#39; is the IP of the machine that runs the Apache web tier, and</span>
<span style="color:#75715e">#       &#39;myport&#39; is the port that the Apache webt ier is publicly exposed to.</span>
<span style="color:#75715e">#&lt;Location /weblogic2&gt;</span>
<span style="color:#75715e">#WLSRequest On</span>
<span style="color:#75715e">#WebLogicCluster domain2-cluster-cluster-1:8021</span>
<span style="color:#75715e">#PathTrim /weblogic2</span>
<span style="color:#75715e">#&lt;/Location&gt;</span>
</code></pre></div>
    </div>
</div>
</li>
<li>
<p>Update <code>volume path</code> with the directory location of the file <code>custom_mod_wl_apache.conf</code> in file <code>kubernetes/samples/charts/apache-samples/custom-sample/input.yaml</code></p>
</li>
</ol>
<h4 id="prepare-the-certificate-and-private-key">Prepare the certificate and private key</h4>
<ol>
<li>
<p>(For the SSL termination configuration only) Run the following commands to generate your own certificate and private key using <code>openssl</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> $ cd <span style="color:#e6db74">${</span>WORKDIR<span style="color:#e6db74">}</span>/weblogic-kubernetes-operator
 $ cd kubernetes/samples/charts/apache-samples/custom-sample
 $ export VIRTUAL_HOST_NAME<span style="color:#f92672">=</span>WEBLOGIC_HOST
 $ export SSL_CERT_FILE<span style="color:#f92672">=</span>WEBLOGIC_HOST.crt
 $ export SSL_CERT_KEY_FILE<span style="color:#f92672">=</span>WEBLOGIC_HOST.key
 $ sh certgen.sh
</code></pre></div><blockquote>
<p>NOTE: Replace WEBLOGIC_HOST with the host name on which Apache webtier is to be installed.</p>
</blockquote>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Click here to see the output of the certifcate generation
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> $ls
 certgen.sh  custom_mod_wl_apache.conf  custom_mod_wl_apache.conf_orig  input.yaml  README.md
 $ sh certgen.sh
 Generating certs <span style="color:#66d9ef">for</span> WEBLOGIC_HOST
 Generating a <span style="color:#ae81ff">2048</span> bit RSA private key
 ........................+++
 .......................................................................+++
 unable to write <span style="color:#e6db74">&#39;random state&#39;</span>
 writing new private key to <span style="color:#e6db74">&#39;apache-sample.key&#39;</span>
 -----
 $ ls
 certgen.sh                 custom_mod_wl_apache.conf_orig                             WEBLOGIC_HOST.info
 config.txt                 input.yaml                                                 WEBLOGIC_HOST.key
 custom_mod_wl_apache.conf  WEBLOGIC_HOST.crt  README.md
</code></pre></div>
    </div>
</div>
</li>
<li>
<p>Prepare input values for the Apache webtier Helm chart.</p>
<p>Run the following commands to prepare the input value file for the Apache webtier Helm chart.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ base64 -i <span style="color:#e6db74">${</span>SSL_CERT_FILE<span style="color:#e6db74">}</span> | tr -d <span style="color:#e6db74">&#39;\n&#39;</span>
$ base64 -i <span style="color:#e6db74">${</span>SSL_CERT_KEY_FILE<span style="color:#e6db74">}</span> | tr -d <span style="color:#e6db74">&#39;\n&#39;</span>
$ touch input.yaml
</code></pre></div><p>Update <code>virtualHostName</code> with the value of the <code>WEBLOGIC_HOST</code> in file <code>kubernetes/samples/charts/apache-samples/custom-sample/input.yaml</code></p>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Click here to see the snapshot of the sample input.yaml file 
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> $ cat apache-samples/custom-sample/input.yaml
 <span style="color:#75715e"># Use this to provide your own Apache webtier configuration as needed; simply define this</span>
 <span style="color:#75715e"># path and put your own custom_mod_wl_apache.conf file under this path.</span>
 volumePath: <span style="color:#e6db74">${</span>WORKDIR<span style="color:#e6db74">}</span>/weblogic-kubernetes-operator/kubernetes/samples/charts/apache-samples/custom-sample

 <span style="color:#75715e"># The VirtualHostName of the Apache HTTP server. It is used to enable custom SSL configuration.</span>
 virtualHostName: &lt;WEBLOGIC_HOST&gt;
</code></pre></div>
    </div>
</div>
</li>
</ol>
<h4 id="install-the-apache-webtier-helm-chart">Install the Apache webtier Helm chart</h4>
<ol>
<li>
<p>Install the Apache webtier Helm chart to the domain <code>soans</code> namespace with the specified input parameters:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd <span style="color:#e6db74">${</span>WORKDIR<span style="color:#e6db74">}</span>/weblogic-kubernetes-operator/kubernetes/samples/charts
$ kubectl create namespace apache-webtier
$ helm install  apache-webtier --values apache-samples/custom-sample/input.yaml --namespace soans apache-webtier --set image<span style="color:#f92672">=</span>oracle/apache:12.2.1.3
</code></pre></div></li>
<li>
<p>Check the status of the Apache webtier:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> $ kubectl get all -n soans | grep apache
</code></pre></div><p>Sample output of the status of the apache webtier:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pod/apache-webtier-apache-webtier-65f69dc6bc-zg5pj   1/1     Running     <span style="color:#ae81ff">0</span>          22h
service/apache-webtier-apache-webtier   NodePort       10.108.29.98     &lt;none&gt;        80:30305/TCP,4433:30443/TCP   22h
deployment.apps/apache-webtier-apache-webtier   1/1     <span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">1</span>           22h
replicaset.apps/apache-webtier-apache-webtier-65f69dc6bc   <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>       22h
</code></pre></div></li>
</ol>
<h4 id="verify-domain-application-url-access">Verify domain application URL access</h4>
<p>Post the Apache webtier load balancer is up, verify that the domain applications are accessible through the load balancer port <code>30305/30443</code>. The application URLs for domain of type <code>soa</code> are:</p>
<blockquote>
<p>Note: Port <code>30305</code> is the LOADBALANCER-Non-SSLPORT and Port <code>30443</code> is LOADBALANCER-SSLPORT.</p>
</blockquote>
<h5 id="non-ssl-configuration">Non-SSL configuration</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-Non-SSLPORT<span style="color:#e6db74">}</span>/weblogic/ready
 http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-Non-SSLPORT<span style="color:#e6db74">}</span>/console
 http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-Non-SSLPORT<span style="color:#e6db74">}</span>/em
 http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-Non-SSLPORT<span style="color:#e6db74">}</span>/soa-infra
 http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-Non-SSLPORT<span style="color:#e6db74">}</span>/soa/composer
 http://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-Non-SSLPORT<span style="color:#e6db74">}</span>/integration/worklistapp
</code></pre></div><h5 id="ssl-configuration">SSL configuration</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">https://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-SSLPORT<span style="color:#e6db74">}</span>/weblogic/ready
https://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-SSLPORT<span style="color:#e6db74">}</span>/console
https://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-SSLPORT<span style="color:#e6db74">}</span>/em
https://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-SSLPORT<span style="color:#e6db74">}</span>/soa-infra
https://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-SSLPORT<span style="color:#e6db74">}</span>/soa/composer
https://<span style="color:#e6db74">${</span>LOADBALANCER-HOSTNAME<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>LOADBALANCER-SSLPORT<span style="color:#e6db74">}</span>/integration/worklistapp
</code></pre></div><h4 id="uninstall-apache-webtier">Uninstall Apache webtier</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ helm delete apache-webtier -n soans
</code></pre></div>

<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configure-load-balancer/voyager/" title="Voyager"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/fmw-kubernetes/20.4.2/soa-domains/adminguide/configuring-custom-ssl-certificates/" title="Configure SSL certificates" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/fmw-kubernetes/20.4.2/js/clipboard.min.js?1607682397"></script>
    <script src="/fmw-kubernetes/20.4.2/js/perfect-scrollbar.min.js?1607682397"></script>
    <script src="/fmw-kubernetes/20.4.2/js/perfect-scrollbar.jquery.min.js?1607682397"></script>
    <script src="/fmw-kubernetes/20.4.2/js/jquery.sticky.js?1607682397"></script>
    <script src="/fmw-kubernetes/20.4.2/js/featherlight.min.js?1607682397"></script>
    <script src="/fmw-kubernetes/20.4.2/js/highlight.pack.js?1607682397"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/fmw-kubernetes/20.4.2/js/modernizr.custom-3.6.0.js?1607682397"></script>
    <script src="/fmw-kubernetes/20.4.2/js/learn.js?1607682397"></script>
    <script src="/fmw-kubernetes/20.4.2/js/hugo-learn.js?1607682397"></script>

    <link href="/fmw-kubernetes/20.4.2/mermaid/mermaid.css?1607682397" rel="stylesheet" />
    <script src="/fmw-kubernetes/20.4.2/mermaid/mermaid.js?1607682397"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

